{"categories":[{"title":"git","uri":"https://gb.ytte.top/categories/git/"},{"title":"java","uri":"https://gb.ytte.top/categories/java/"},{"title":"JVM","uri":"https://gb.ytte.top/categories/jvm/"},{"title":"MySQL","uri":"https://gb.ytte.top/categories/mysql/"},{"title":"ZooKeeper","uri":"https://gb.ytte.top/categories/zookeeper/"},{"title":"æœåŠ¡å™¨","uri":"https://gb.ytte.top/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"},{"title":"æ‚é¡¹","uri":"https://gb.ytte.top/categories/%E6%9D%82%E9%A1%B9/"},{"title":"è®¡ç®—æœºç½‘ç»œ","uri":"https://gb.ytte.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"},{"title":"é¡¹ç›®","uri":"https://gb.ytte.top/categories/%E9%A1%B9%E7%9B%AE/"}],"posts":[{"content":"Giteeè‡ªåŠ¨æ›´æ–°éƒ¨ç½²çš„è„šæœ¬ä½¿ç”¨ gitee å®¹é‡æ¯”githubå¤§ï¼Œå•å­˜åœ¨ä¸èƒ½ç»‘å®šè‡ªå®šä¹‰åŸŸåï¼Œä»¥åŠä¸èƒ½è‡ªåŠ¨æ›´æ–°éƒ¨ç½²çš„é—®é¢˜ã€‚\nè‡ªåŠ¨æ›´æ–°è„šæœ¬  å‚è€ƒï¼šä¼ é€\n å‰ç½®ï¼š node ï¼Œpuppeteer\n  éœ€è¦nodeç¯å¢ƒ\nNodeJS å®‰è£…åŠç¯å¢ƒé…ç½®\n  æ–°å»ºå»ºä¸€ä¸ªæ–‡ä»¶å¤¹ ç”¨æ¥å®‰è£… puppeteer\n  åœ¨æ–°å»ºçš„æ–‡ä»¶å¤¹å†… æ‰“å¼€cmdè¾“å…¥ä¸‹æ–¹ä»£ç åï¼Œä¸è¦å…³é—­cmdçª—å£ã€‚\nnpm init -y npm i -s puppeteer@1.8.0 `\n  å®‰è£…å¥½åä¼šå‡ºç°package.jsonï¼Œæ‰“å¼€å…¨éƒ¨æ›¿æ¢ä¸ºå¦‚ä¸‹ä»£ç \n{  \u0026#34;name\u0026#34;: \u0026#34;puppeteer\u0026#34;,  \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;,  \u0026#34;description\u0026#34;: \u0026#34;\u0026#34;,  \u0026#34;main\u0026#34;: \u0026#34;index.js\u0026#34;,  \u0026#34;scripts\u0026#34;: {  \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34;  },  \u0026#34;keywords\u0026#34;: [],  \u0026#34;author\u0026#34;: \u0026#34;\u0026#34;,  \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34;,  \u0026#34;dependencies\u0026#34;: {  \u0026#34;puppeteer\u0026#34;: \u0026#34;^1.8.0\u0026#34;  },  \u0026#34;name\u0026#34;: \u0026#34;git-update-pages\u0026#34;,  \u0026#34;bin\u0026#34;: {  \u0026#34;git-update-pages\u0026#34;: \u0026#34;index.js\u0026#34;  } }   æ–°å»ºindex.jsï¼Œå¡«å…¥ä¸€ä¸‹ä»£ç .å…¶ä¸­ 17ã€22ã€31 è¡Œéœ€è¦æ›´æ”¹ä¸ºè‡ªå·±çš„ä¿¡æ¯ã€‚æ›´æ”¹å®Œæˆåä¿å­˜ã€‚\n#! /usr/bin/env node // æ­¤å¤„å®‰è£…ç‰ˆæœ¬ä¸º 1.8.0 const puppeteer = require(\u0026#34;puppeteer\u0026#34;)  // ä¸»è¦åŸç†åœ¨äºä½¿ç”¨xpathè·å–htmlé¡µé¢domå…ƒç´ ï¼Œè„šæœ¬ä»£æ›¿å°æ‰‹è‡ªåŠ¨è§¦å‘ç‚¹å‡»äº‹ä»¶ async function giteeUpdate() {  const browser = await puppeteer.launch({  // æ­¤å¤„å¯ä»¥ä½¿ç”¨ false æœ‰å¤´æ¨¡å¼è¿›è¡Œè°ƒè¯•, è°ƒè¯•å®Œæ³¨é‡Šå³å¯  headless: false  })  const page = await browser.newPage()  await page.goto(\u0026#34;https://gitee.com/login\u0026#34;)   // 1. è·å–è´¦å·inputï¼Œè‡ªåŠ¨è¾“å…¥  let accountElements = await page.$x(\u0026#39;//*[@id=\u0026#34;user_login\u0026#34;]\u0026#39;)  // ğŸš¨éœ€è¦è®¾ç½®ä¸ºè‡ªå·±çš„giteeè´¦æˆ·ğŸš¨  await accountElements[0].type(\u0026#34;è‡ªå·±çš„giteeè´¦æˆ·\u0026#34;)   // 2. è·å–å¯†ç inputï¼Œè‡ªåŠ¨è¾“å…¥  let pwdElements = await page.$x(\u0026#39;//*[@id=\u0026#34;user_password\u0026#34;]\u0026#39;)  // ğŸš¨éœ€è¦è®¾ç½®è‡ªå·±çš„giteeå¯†ç ğŸš¨  await pwdElements[0].type(\u0026#34;è‡ªå·±çš„giteeå¯†ç \u0026#34;)   // 3. è·å–ç™»å½•æŒ‰é’®ï¼Œè§¦å‘ç‚¹å‡»äº‹ä»¶  let loginButtons = await page.$x(\u0026#39;//*[@class=\u0026#34;git-login-form-fields\u0026#34;]/div[4]/input\u0026#39;)  await loginButtons[0].click()   // 4. ç­‰å¾…ç™»å½•æˆåŠŸ  await page.waitFor(1000)  ğŸš¨éœ€è¦è®¾ç½®è‡ªå·±çš„gitee pagesé¡µé¢ğŸš¨  await page.goto(\u0026#34;https://gitee.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å/pages\u0026#34;)   // 5. ç›‘å¬è§¦å‘çš„ç¡®è®¤å¼¹æ¡†ï¼Œå¹¶ç‚¹å‡»ç¡®è®¤  await page.on(\u0026#34;dialog\u0026#34;, async dialog =\u0026gt; {  console.log(\u0026#34;ç¡®è®¤æ›´æ–°\u0026#34;)  dialog.accept()  })   // 6. ç‚¹å‡»æ›´æ–°æŒ‰é’®ï¼Œå¹¶å¼¹å‡ºç¡®è®¤å¼¹çª—  let updateButtons = await page.$x(\u0026#39;//*[@id=\u0026#34;pages-branch\u0026#34;]/div[6]\u0026#39;)  console.log(1111, updateButtons)  await updateButtons[0].click()   //7. è½®è¯¢å¹¶ç¡®è®¤æ˜¯å¦æ›´æ–°å®Œæ¯•  while (true) {  await page.waitFor(2000)  try {  // è·å–æ›´æ–°çŠ¶æ€æ ‡ç­¾  deploying = await page.$x(\u0026#39;//*[@id=\u0026#34;pages_deploying\u0026#34;]\u0026#39;)  if (deploying.length \u0026gt; 0) {  console.log(\u0026#34;æ›´æ–°ä¸­...\u0026#34;)  } else {  console.log(\u0026#34;æ›´æ–°å®Œæ¯•\u0026#34;)  break  }  } catch (error) {  break  }  }  await page.waitFor(500)   // 8.æ›´æ–°å®Œæ¯•ï¼Œå…³é—­æµè§ˆå™¨  browser.close() }  giteeUpdate()   æ‰“å¼€åˆšåˆšçš„cmdçª—å£ï¼Œè¾“å…¥å¦‚ä¸‹ä»£ç ã€‚ï¼ˆå°†npm æ¨¡å—é“¾æ¥åˆ°å¯¹åº”çš„è¿è¡Œé¡¹ç›®ä¸­å»ï¼‰\nnpm link   ç°åœ¨å°±å¯ä»¥æœ¬åœ°ä½¿ç”¨git-update-pageså‘½ä»¤æ¥è‡ªåŠ¨åŒ–æ“ä½œå»æ›´æ–°gitee page æ›´æ–°éƒ¨ç½²äº†ã€‚\n ","id":0,"section":"posts","summary":"","tags":["Gitee"],"title":"Giteeè‡ªåŠ¨æ›´æ–°éƒ¨ç½²çš„è„šæœ¬","uri":"https://gb.ytte.top/2022/03/20/gitee%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E9%83%A8%E7%BD%B2%E7%9A%84%E8%84%9A%E6%9C%AC/","year":"2022"},{"content":"æœ¬åœ°åŒæ­¥åˆ°ä¸€ä¸ªgitä»“åº“    åºå· ä»£ç  æ„è¯‘     1 git init åˆå§‹åŒ–ä»“åº“   2 åœ¨ä»“åº“ç«¯ç‚¹å‡»åˆå§‹åŒ–ä»“åº“æ·»åŠ readmeæ–‡ä»¶    3 git pull è¿œç¨‹ä»“åº“åœ°å€ æ‹‰å–åŒæ­¥è¿œç¨‹ä»“åº“ä»£ç    4- git config \u0026ndash;global user.name \u0026ldquo;xxx\u0026rdquo; è®¾ç½®commitåæ˜¾ç¤ºçš„æäº¤ç”¨æˆ·çš„name==è¿™é‡Œè¦æ³¨æ„\u0026ndash;globalï¼Œå¦‚æœéœ€è¦è®©ä¸åŒä»“åº“ä½¿ç”¨ä¸åŒçš„nameï¼Œemailï¼Œå¯ä»¥å°†\u0026ndash;globalå»æ‰==   5 git config \u0026ndash;global user.email \u0026ldquo;xxx@xxx.com\u0026rdquo; è®¾ç½®commitåæ˜¾ç¤ºçš„æäº¤ç”¨æˆ·çš„email   6 git add . å°†æœ¬åœ°æ–‡ä»¶ä»£ç ç­‰äº¤ç»™æš‚å­˜åŒºï¼Œï¼ˆHEADæŒ‡é’ˆä¸å˜åŒ–ï¼Œä¾ç„¶æŒ‡å‘initçš„çŠ¶æ€ï¼‰   7 git commit -m â€œæäº¤è¾¨è¯†ä¿¡æ¯â€ å°†æœ¬åœ°æ–‡ä»¶ä»£ç ç­‰äº¤ç»™æœ¬åœ°ä»“åº“ï¼ˆHEADæŒ‡é’ˆæŒ‡å‘â€œæäº¤è¾¨è¯†ä¿¡æ¯â€ï¼‰   8 git remote -v æŸ¥çœ‹æœ‰æ— è¿œç¨‹ä»“åº“   9 ssh-keygen -t rsa -C \u0026ldquo;xxx@qq.com\u0026rdquo; ä¸ºäº†ä½¿ç”¨sshè¿æ¥ï¼Œåˆ›å»ºsshå…¬é’¥ï¼Œå›è½¦åæ¥ç€å›è½¦çŸ¥é“ç»“æŸï¼ˆé—®çš„æ˜¯1.æ˜¯å¦æ›´æ”¹è·¯å¾„ã€‚2.æ˜¯å¦è®¾ç½®å¯†ç ã€‚3.æ˜¯å¦è®¾ç½®å…¶ä»–ä»€ä¹ˆçš„ ä¸éœ€è¦ï¼ï¼‰   10 å°†C:\\Users\\Administrator\\ .ssh\\id_rsa.pub é‡Œé¢çš„å†…å®¹å¤åˆ¶åˆ°githubå³ä¸Šè§’å¤´åƒé‡Œä¸‹æ–¹è®¾ç½®é‡Œsshé‡Œé¢ã€‚    11 ssh -T git@github.com æµ‹è¯•æ˜¯å¦è¿æ¥   12 git remote add origin git@github.com:xxx/xxx.github.io.git ä½¿ç”¨sshåœ°å€æ·»åŠ è¿œç¨‹ä»“åº“   13 git branch -v æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯   14 git push -u origin master å°†æœ¬åœ°ä»“åº“æœ¬åœ°åˆ†æ”¯çš„å†…å®¹åŒæ­¥åˆ°è¿œç¨‹ä»“åº“originçš„masteråˆ†æ”¯   15 git branch \u0026ndash;set-upstream-to=origin/è¿œç¨‹åˆ†æ”¯çš„åå­— æœ¬åœ°åˆ†æ”¯çš„åå­— å…³è”æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯ï¼ˆè¿™æ ·ä»¥ååŒæ­¥åªéœ€è¦git pushï¼‰    åŒä¸€ä¸ªæœ¬åœ°ä»“åº“åŒæ­¥åˆ°å¤šä¸ªä¸åŒå‚å®¶çš„git ä»“åº“    ä»¥ä¸‹éƒ½æ˜¯åŸºäºæœ¬åœ°åŒæ­¥è¿‡ä¸€ä¸ªgitä»“åº“      ä¸€èˆ¬sshå¯†é’¥éƒ½æ˜¯ä¿å­˜C:\\Users\\Administrator\\ .sshé‡Œ è¿™é‡Œçš„Administratoræ˜¯ä½ çš„ç”µè„‘æœ¬æ¬¡çš„ç™»å½•çš„è´¦æˆ·ï¼Œå¦‚æœç”µè„‘è´¦æˆ·åªæœ‰ä¸€ä¸ªä¸€èˆ¬éƒ½æ˜¯è¿™ä¸ªåç§°   è¿›å…¥C:\\Users\\Administrator\\ .ssh åˆ›å»ºconfigæ–‡ä»¶ï¼ˆæ— åç¼€åï¼‰    ä½¿ç”¨notepad++æˆ–è€…vscodeæ‰“å¼€configæ–‡ä»¶ï¼Œå°†ä»£ç è¾“å…¥ä¿å­˜     #Default github userï¼ˆxxxx@xxx.comï¼‰-è¿™æ˜¯æ³¨é‡Š  Host ytte #æŠŠé»˜è®¤çš„å¸¸ç”¨çš„github Hostè®¾ä¸ºgithub.comè¾ƒå¥½  HostName github.com # è¿œç¨‹ä»“åº“çš„åŸŸååœ°å€ï¼Œgiteeæ˜¯gitee.com \tPort 22 # ä¸€èˆ¬æœåŠ¡ç«¯ç«¯å£éƒ½æ˜¯22ï¼Œæ‰€ä»¥å¯ä»¥çœç•¥ä¸å†™ï¼Œå¦‚æœä½¿ç”¨äº‘æœåŠ¡å™¨åšä¸ºgitå…¬å…±ä»“åº“ï¼Œä¸”æœåŠ¡ç«¯22ç«¯å£è¢«æ›´æ”¹åˆ™éœ€è¦å†™ä¸Šæ›´æ”¹åçš„ç«¯å£  PreferredAuthentications publickey  IdentityFile ~/.ssh/id_rsa #è¯ä¹¦æ–‡ä»¶è·¯å¾„  #second user(xxx@xxx.com)  Host gitee  HostName gitee.com  PreferredAuthentications publickey  IdentityFile ~/.ssh/id_rsa_gitee #-----è¿™é‡Œçš„id_rsa_giteeæ˜¯åé¢åˆ›å»ºå¯†é’¥ä¸­éœ€è¦æ›´æ”¹çš„åç§°    åºå· ä»£ç  æ„è¯‘     1 ssh-keygen -t rsa -C \u0026ldquo;xxx@qq.com\u0026rdquo; åœ¨å›è½¦åï¼Œä¼šæç¤ºæ˜¯å¦æ›´æ”¹è·¯å¾„å’Œåç§°ï¼Œæˆ‘ä»¬éœ€è¦æŠŠåç§°æ›´æ”¹ï¼Œä¸æ”¹è·¯å¾„C:\\Users\\Administrator\\.ssh\\id_rsa_giteeã€‚è¿™é‡Œçš„åç§°å°±æ˜¯ä¸Šæ–¹ä»£ç æœ€åå¡«å†™çš„   2 ç”±äºä¸€ä¸ªgitè´¦å·ï¼ˆä¸è®ºgiteeè¿˜æ˜¯githubï¼‰éƒ½åªèƒ½ç»‘å®šä¸€ä¸ªsshå¯†é’¥ï¼Œä¸”è¯¥å¯†é’¥ä¸èƒ½è¢«åŒæ—¶ç»‘å®šä¸¤ä¸ªè´¦å·ï¼ˆä¸è®ºgiteeè¿˜æ˜¯githubï¼‰ã€‚æ‰€ä»¥å†æ¬¡åˆ›å»ºä¸€ä¸ªå¯†åŒ™ã€‚ ==å½“ç„¶å¯ä»¥ä»ä¸­æƒè¡¡ï¼Œgithubæ˜¯å›½å¤–çš„ï¼Œé€šè¿‡sshè®¿é—®ä¼šå¿«äºhttpsè®¿é—®ï¼Œè€Œgiteeæ˜¯å›½å†…çš„ï¼Œhttpså’Œsshä¸¤ç§è®¿é—®é€Ÿåº¦å·®ä¸å¤šï¼Œæ‰€ä»¥githubä½¿ç”¨sshï¼Œgiteeä½¿ç”¨httpsä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè¿™æ ·å°±ä¸éœ€è¦é…ç½®å¤šä¸ªsshå¯†åŒ™äº†==   3 git remote -v    4 git remote rm åˆ é™¤ä¹‹å‰çš„è¿œç¨‹ä»“åº“ï¼Œå› ä¸ºå¦‚ä¸Šä»£ç ä½¿ç”¨configé…ç½®çš„æ–¹å¼ï¼Œè¿œç¨‹ä»“åº“åœ°å€éœ€è¦é‡æ–°é…ç½®   5 git remote add gitee1 git@gitee:xxx/xxx.gitee.io.git æ³¨æ„è¿™é‡Œgit@gitee:xxx/xxx.gitee.io.gitçš„giteeæ˜¯configä¸­çš„Host gitee   6 git remote add github1 git@ytte:xxx/xxx.github.io.git æ³¨æ„è¿™é‡Œgit@ytte:xxx/xxx.github.io.gitçš„ytteæ˜¯configä¸­çš„Host ytte   7 git remote -v æŸ¥çœ‹ä¸¤ä¸ªè¿œç¨‹ä»“åº“ gitee1 å’Œ github1 æ˜¯å¦æ­£ç¡®   8 è¿™é‡Œæ²¡æœ‰è®¾ç½®user.nameå’Œuser.email å› ä¸ºåœ¨æœ€ä¸Šé¢4,5ä¸­å·²ç»è®¾ç½®è¿‡äº†\u0026ndash;globalå…¨å±€   9 git pull git@gitee:xxx/xxx.gitee.io.git è¿™é‡Œ@åçš„éƒ½éœ€è¦æ›´æ”¹ä¸ºè‡ªå·±çš„ä¿¡æ¯   10 git pull git@ytte:xxx/xxx.github.io.git è¿™é‡Œ@åçš„éƒ½éœ€è¦æ›´æ”¹ä¸ºè‡ªå·±çš„ä¿¡æ¯    git pull è¿œç¨‹ä»“åº“åç§° è¿œç¨‹ä»“åº“åˆ†æ”¯åç§° \u0026ndash;allow-unrelated-histories å¦‚æœä¸èƒ½pullï¼Œå¯ä»¥ä½¿ç”¨æ­¤å‘½ä»¤å¼ºåˆ¶pullåˆå¹¶   11 git add .    12 git commit -m â€œç”¨äºè¾¨åˆ«æäº¤ä¿¡æ¯â€    13 git push -u gitee1 master gitee1 ä¸ºæœ¬è¡¨æ ¼5ä¸­è®¾ç½®çš„è¿œç¨‹ä»“åº“åç§° ï¼Œmasterä¸ºè¿œç¨‹ä»“åº“åˆ†æ”¯   14 git push -u github1 master github1 ä¸ºæœ¬è¡¨æ ¼6ä¸­è®¾ç½®çš„è¿œç¨‹ä»“åº“åç§° ï¼Œmasterä¸ºè¿œç¨‹ä»“åº“åˆ†æ”¯   15 fetchæœªæŒ‡å®šåœ°å€æ—¶æ˜¯é»˜è®¤ä»ç¬¬ä¸€ä¸ªä»“åº“ä¸­å–      æå®šï¼\näººç”Ÿæ— å¸¸ï¼Œå¤§è‚ åŒ…å°è‚ ï¼\nç»§ç»­å­¦ä¹ å§ï¼\n","id":1,"section":"posts","summary":"","tags":["git","github","gitee"],"title":"Gitå¤šä¸ªssh","uri":"https://gb.ytte.top/2022/03/20/git%E5%A4%9A%E4%B8%AAssh/","year":"2022"},{"content":"Https  è§†é¢‘====ã€‹å“”å“©å“”å“©_bilibili\n å‰ç½®è¦æ±‚   è·å¾—åŸŸå\nä¸€çº§åŸŸå - YTTE Site\n  è®¾ç½®äºŒçº§åŸŸå IPHP äºŒçº§åŸŸå - YTTE Site\n  dockeråŸºç¡€çŸ¥è¯†\n  HTTPSæµç¨‹ ä¸ªäººç†è§£ï¼ˆæœªå­¦è¿‡è®¡ç®—æœºç½‘ç»œ need todoï¼‰\nè®¾ç½®SSLè¯ä¹¦ ä¸Šç¯‡   è¿›å…¥é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œç‚¹å‡»SSLè¯ä¹¦\n  è¿›å…¥åï¼Œç‚¹å‡»å·¦ä¾§çš„SSLè¯ä¹¦é€‰é¡¹\n  å†ç‚¹å‡»å…è´¹è¯ä¹¦\n  ç‚¹å‡»ç«‹å³è´­ä¹°\n  å…è´¹çš„è¯ä¹¦æ¯äººæ¯å¹´åªèƒ½æ‹¥æœ‰20å¼ ã€‚æ‰€ä»¥é€‰é¡¹é»˜è®¤ä¸åšå˜åŠ¨ã€‚ç«‹å³è´­ä¹°\n  ç‚¹å‡»åˆ›å»ºè¯ä¹¦\n  ç‚¹å‡»å·¦ä¾§æ çš„ä¿¡æ¯ç®¡ç†ï¼Œæ–°å»ºè”ç³»äººã€‚æŒ‰è¦æ±‚å¡«å†™ä¿¡æ¯ã€‚\n  ç‚¹å‡»å·¦ä¾§æ SSLè¯ä¹¦ï¼Œç‚¹å‡»å…è´¹è¯ä¹¦ï¼Œç‚¹å‡»è¯ä¹¦ç”³è¯·ï¼Œå¡«å†™åŸŸåï¼Œé€‰æ‹©è‡ªåŠ¨DNSéªŒè¯ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œä¸‹ä¸€æ­¥ã€‚\n  è®°å½•ä¸‹è¿™é‡Œçš„è®°å½•ç±»å‹ï¼Œä¸»æœºè®°å½•ï¼Œè®°å½•å€¼\n  æ–°ç½‘é¡µæ ‡ç­¾æ‰“å¼€æ§åˆ¶å°é‡Œçš„åŸŸåã€‚\n  ç‚¹å‡»å·¦ä¾§æ ã€åŸŸååˆ—è¡¨ã€‘ï¼Œæ‰¾åˆ°ä¸€ä¸ªåŸŸåï¼Œç‚¹å‡»å³ä¾§çš„ã€è§£æã€‘ã€‚\n  ç‚¹å‡»æ·»åŠ è®°å½•ã€‚å°†9ä¸­çš„ã€Šè®°å½•ç±»å‹ã€‹ï¼Œã€Šä¸»æœºè®°å½•ã€‹ï¼Œã€Šè®°å½•å€¼ã€‹é€‰æ‹©æˆ–è€…å¡«ã€‚ã€Šè§£æè·¯çº¿ã€‹å’Œã€ŠTTLã€‹é»˜è®¤ã€‚ç‚¹å‡»ã€ç¡®è®¤ã€‘ã€‚\n  å›åˆ°8ä¸­çš„é¡µé¢ç‚¹å‡»ã€éªŒè¯ã€‘ï¼ŒæˆåŠŸå³å¯ã€‚ç‚¹å‡»ã€ä¸‹è½½ã€‘å°†è¯ä¹¦ä¸‹è½½ä¿å­˜ï¼ˆé€‰æ‹©Nginxç‰ˆæœ¬ï¼‰ã€‚\n   ä¸‹ç¯‡   ä½¿ç”¨xhsellè¿æ¥é˜¿é‡Œäº‘æœåŠ¡å™¨\n  ä½¿ç”¨dockerå®‰è£…Nginx\ndocker pull nginx   è¿è¡Œé•œåƒ\ndocker run -p 80:80 -p 443:443 --name nginx -v /mnt/nginx/html:/usr/share/nginx/html -v /mnt/nginx/logs:/var/log/nginx -v /mnt/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v /mnt/nginx/cert/:/etc/nginx/cert/ --restart=always --privileged=true -d nginx å‰ç¼€ /mnt/nginx å¯ä»¥è‡ªå®šä¹‰ã€‚\n  è¿è¡Œå®Œæˆå docker psæŸ¥çœ‹ä¸‹æ˜¯å¦è¿è¡ŒæˆåŠŸï¼ˆæ˜¯å¦å­˜åœ¨ï¼ŒSTATUSæ˜¯ä¸æ˜¯upï¼‰\nç„¶åè¿›å…¥certæ–‡ä»¶å¤¹\ncd /mnt/nginx/cert/ å°†ä¸Šç¯‡ç¬¬13æ­¥ä¸‹è½½ä¿å­˜çš„å‹ç¼©åŒ…æ‹–åŠ¨ç§»åŠ¨æ”¾å…¥xshellçª—å£é‡Œï¼ˆå°±æ˜¯ä¼ è¾“åˆ°æœåŠ¡å½“å‰æ–‡ä»¶å¤¹ï¼Œå¦‚æœä½¿ç”¨xftpæ›´åŠ æ–¹ä¾¿ï¼‰ã€‚\n  ä¼ è¾“å®Œæˆåã€‚è¾“å…¥ä¸€ä¸‹å‘½ä»¤è§£å‹ï¼Œå¯ä»¥å¾—åˆ°åç¼€ä¸ºpemå’Œpubçš„æ–‡ä»¶ã€‚\ntar -zxvf å‹ç¼©åŒ…å…¨å   ä½¿ç”¨xftpè¿›å…¥/mnt/nginx/conf/æ–‡ä»¶å¤¹ï¼Œå³é”®nginx.confæ–‡ä»¶ï¼Œæ²¡æœ‰çš„è¯ï¼Œè‡ªå·±åˆ›å»ºä¸€ä¸ªã€‚å¦‚ä¸‹ä»£ç å…¨éƒ¨æ›¿æ¢ã€‚ç„¶åä¿å­˜ã€‚\n# ctrl + F æŸ¥æ‰¾ å¡«å†™ æ¥å¯»æ‰¾éœ€è¦æ›´æ”¹çš„åœ°æ–¹ã€‚ worker_processes 1;  events {  worker_connections 1024; }  http {  include /etc/nginx/mime.types; #ä¸éœ€è¦æ›´æ”¹  default_type application/octet-stream;\t#ä¸éœ€è¦æ›´æ”¹   log_format main \u0026#39;$remote_addr - $remote_user [$time_local] \u0026#34;$request\u0026#34; \u0026#39;  \u0026#39;$status $body_bytes_sent \u0026#34;$http_referer\u0026#34; \u0026#39;  \u0026#39;\u0026#34;$http_user_agent\u0026#34; \u0026#34;$http_x_forwarded_for\u0026#34;\u0026#39;;\t#ä¸éœ€è¦æ›´æ”¹   #access_log logs/access.log main;   sendfile on;\t#ä¸éœ€è¦æ›´æ”¹  #tcp_nopush on;   #keepalive_timeout 0;  keepalive_timeout 65;\t#ä¸éœ€è¦æ›´æ”¹   #gzip on; \tserver {  listen 443 ssl; # è¿™é‡Œæ˜¯æ–°ç‰ˆNginxçš„å†™æ³•  server_name blogimg.ytte.top; # å¡«å†™ä½ çš„åŸŸå  # ssl on; # è¿™ç§å·²ç»ä¸ä½¿ç”¨äº†ï¼Œè¿™ä¹ˆå†™ä¼šæŠ¥è­¦å‘Šï¼Œå¯ä»¥ç›´æ¥å»æ‰é‡‡ç”¨ç¬¬ä¸€è¡Œçš„å†™æ³•  root /home/git/hugo; # å‰å°æ–‡ä»¶å­˜æ”¾æ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬ä½¿ç”¨ Nginx åˆå§‹åŒ–çš„æ–‡ä»¶å¤¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±ä¿®æ”¹  index index.html; # ä¸Šé¢é…ç½®çš„æ–‡ä»¶å¤¹é‡Œé¢çš„index.html  ssl_certificate cert/7448435_blogimg.ytte.top.pem; #å¡«å†™æ”¹æˆä½ çš„è¯ä¹¦çš„åå­—  ssl_certificate_key cert/7448435_blogimg.ytte.top.key;#å¡«å†™ä½ çš„è¯ä¹¦çš„åå­—  ssl_session_timeout 5m;  ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;  ssl_prefer_server_ciphers on;  location / {  index index.html index.htm;  } \t} \tserver {  listen 80;  server_name blogimg.ytte.top; #å¡«å†™ä½ çš„åŸŸå  rewrite ^(.*)$ https://$host:443$1 permanent; # æŠŠhttpçš„åŸŸåè¯·æ±‚è½¬æˆhttpsä¸”è½¬å‘åˆ°443ç«¯å£ \t} }   å›åˆ°Xshellä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹nginxçš„å®¹å™¨idï¼Œé‡å¯nginxæ˜¯çš„é…ç½®æ–‡ä»¶ç”Ÿæ•ˆã€‚\ndocker ps  docker restart nginxå®¹å™¨çš„id  docker ps #æŸ¥çœ‹æ˜¯å¦é‡å¯æˆåŠŸï¼ˆSTATUSä¸ºupå³æˆåŠŸï¼Œå¦‚æœæ˜¾ç¤ºrestartingï¼Œç­‰ä¸€ä¼šå†docker ps ï¼Œå¦‚æœè¿˜æ˜¾ç¤ºrestartingï¼Œå¯èƒ½æ˜¯6ä¸­ nginx.conf é…ç½®é”™è¯¯ï¼Œä»”ç»†æ£€æŸ¥ä¸€ä¸‹ï¼›å¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œè¿›å…¥/mnt/nginx/logsä¸‹æŸ¥çœ‹ä¸‹erroré”™è¯¯æ—¥å¿—ï¼Œåœ¨å¯»æ‰¾è§£å†³åŠæ³•ï¼‰   è‡³æ­¤httpsé…ç½®å®Œæˆï¼Œæˆ‘ä»¬åªéœ€è¦è®¿é—®6ä¸­é…ç½®çš„åŸŸåï¼ˆç«¯å£ä¸º80 é»˜è®¤ä¸å†™ï¼‰ï¼Œnginxå°±èƒ½å¸®æˆ‘ä»¬æŠŠè®¿é—®è¿™ä¸ªåŸŸå80ç«¯å£è‡ªåŠ¨è½¬åˆ°è¿™ä¸ªåŸŸå443ç«¯å£ï¼Œå®ç°httpsè®¿é—®ã€‚\n  åŸºäºä¸Šè¿°æ‰©å±• å› ä¸ºæœ¬ä¾‹æ˜¯åŸºäºä¸Šè¿°çš„é…ç½®ä¸ƒç‰›äº‘æ–‡ä»¶è®¿é—®çš„äºŒçº§åŸŸåã€‚ä¸ƒç‰›äº‘ä¸­ä½¿ç”¨çš„è¿˜æ˜¯httpæ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†å…¶æ›´æ”¹ä¸ºhttpsæ–¹å¼ã€‚\nåªéœ€è¦é‡å¤äºŒçº§åŸŸåæ“ä½œ â€”â€”\u0026gt;2.é…ç½®ä¸ƒç‰›äº‘ä¸­çš„æ­¥éª¤ï¼Œåœ¨ç¬¬7æ­¥ä¸ç¬¬8æ­¥ä¹‹é—´ï¼Œæ‰§è¡Œä¸€ä¸‹å†…å®¹ã€‚\n æ³¨æ„ï¼šåŠ é€ŸåŸŸåè¦å¡«å†™ä½ ç”³è¯·sslè¯ä¹¦å¡«å†™çš„åŸŸå\n   åŠ é€ŸåŸŸåå¡«å†™ä¸åŒäºä¹‹å‰çš„äºŒçº§ç‰ç±³ï¼›é€šä¿¡åè®®é€‰æ‹©ã€httpsã€‘ï¼Œç‚¹å‡»ã€SSL è¯ä¹¦æœåŠ¡ã€‘\n  ç‚¹å‡»ã€ä¸Šä¼ è‡ªæœ‰è¯ä¹¦ã€‘ã€‚\n  å°†æœ¬æ–‡ä¸Šç¯‡çš„ç¬¬13æ­¥éª¤ä¿å­˜çš„å‹ç¼©åŒ…è§£å‹ï¼Œå¹¶æŠŠä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹å¤åˆ¶è¿™é‡Œï¼ˆè¯ä¹¦å†…å®¹=\u0026gt;pemï¼›è¯ä¹¦ç§é’¥=\u0026gt;keyï¼‰ç‚¹å‡»ã€ç¡®è®¤ä¸Šä¼ ã€‘\n  ç­‰å¾…ä¸Šä¼ æˆåŠŸå³å¯ï¼Œè¿”å›æ·»åŠ åŸŸåç•Œé¢ï¼Œå¡«å†™ä½ ç”³è¯·sslè¯ä¹¦å¡«å†™çš„åŸŸåï¼Œé€šä¿¡åè®®å†æ¬¡ç‚¹å‡»é€‰æ‹©ã€httpsã€‘ï¼Œå°±å¯ä»¥é€‰æ‹©å·²ç»æ·»åŠ çš„è¯ä¹¦ï¼Œä¹‹åæ‰§è¡ŒäºŒçº§åŸŸåä¸­æ­¥éª¤ï¼ˆå³ç¬¬8æ­¥éª¤å¼€å§‹ï¼‰ã€‚\n   æå®šï¼\näººç”Ÿæ— å¸¸ï¼Œå¤§è‚ åŒ…å°è‚ ï¼\nç»§ç»­å­¦ä¹ å§ï¼\n","id":2,"section":"posts","summary":"\u003c!-- raw HTML omitted --\u003e","tags":["Https"],"title":"Https","uri":"https://gb.ytte.top/2022/03/19/https/","year":"2022"},{"content":"ä¸€çº§åŸŸå 1. è´­ä¹°åŸŸå  åœ°å€ï¼šåŸŸå_åŸŸåæŸ¥è¯¢_åŸŸåæ³¨å†Œ_.com_.cn-é˜¿é‡Œäº‘ (aliyun.com)  ä»»ä½•æœåŠ¡ï¼Œéƒ½å¯ä»¥ä¸ä¹°ï¼Œåªè´­ä¹°åŸŸåä½¿ç”¨æƒ\n  é€‰æ‹©ä¸ªäºº\n  é€‰æ‹©ä¸ªäººä¿¡æ¯\n    æœªå®åè®¤è¯çš„ï¼Œè¿›è¡Œé˜¿é‡Œäº‘ä¸ªäººå®åè®¤è¯ (aliyun.com)\n  é€‰æ‹©å·²é˜…è¯»ï¼Œè´­ä¹°\n  2. ç­‰å¾…å®¡æ ¸ è¿›å…¥æ§åˆ¶å°ï¼Œç‚¹å‡»åŸŸååˆ—è¡¨å¯ä»¥çœ‹åˆ°ï¼ŒåŸŸåæ­£åœ¨å®¡æ ¸\n","id":3,"section":"posts","summary":"","tags":["åŸŸå"],"title":"ä¸€çº§åŸŸå","uri":"https://gb.ytte.top/2022/03/16/%E4%B8%80%E7%BA%A7%E5%9F%9F%E5%90%8D/","year":"2022"},{"content":"äºŒçº§åŸŸå ç»™ä¸ƒç‰›äº‘é…ç½®é˜¿é‡Œäº‘æ‰€å±é¡¶çº§åŸŸåçš„äºŒçº§åŸŸåï¼Œæœ¬æ–‡ä»¥simg.ytte.topä¸ºä¾‹\nå¦‚æœåªæƒ³é…ç½®äºŒçº§åŸŸåï¼Œä¸é…ç½®äºŒçº§åŸŸåè½¬å‘ä¸ƒç‰›äº‘çš„è¯ï¼Œç›´æ¥å‚çœ‹æ­¥éª¤9~12ã€‚\n1. é¦–å…ˆè¦æœ‰ä¸€çº§åŸŸå ä¸€çº§åŸŸå - YTTE Site\n2.é…ç½®ä¸ƒç‰›äº‘ ç”±äºä¸ƒç‰›äº‘æ¯æœˆæœ‰åˆå§‹å…è´¹çš„å­˜å‚¨å®¹é‡10gã€CDN 10g ç­‰ç­‰ã€‚æ‰€ä»¥å¾ˆniceï¼Œå°±é€‰å®ƒã€‚\n åˆ›å»ºè´¦å· é€‰æ‹©å¯¹è±¡å­˜å‚¨ æ–°å»ºç©ºé—´=\u0026gt; è®¿é—®æ§åˆ¶é€‰æ‹©å…¬å¼€ã€‚ï¼ˆå°½é‡é€‰æ‹©ç¬¬ä¸€åä¸œåœ°åŒºï¼ˆä¾¿å®œï¼‰ï¼‰ è¿›å…¥ç©ºé—´ï¼Œç‚¹å‡»ã€åŸŸåç®¡ç†ã€‘ ç‚¹å‡»è‡ªå®šä¹‰ CDN åŠ é€ŸåŸŸåã€åŸŸåç»‘å®šã€‘ (ä½¿ç”¨cdnå¯ä»¥åŠ é€Ÿæˆ‘ä»¬è®¿é—®ç©ºé—´å†…æ–‡ä»¶é€Ÿåº¦ï¼ŒåŠ è½½æ›´å¿«)ã€‚å…¶ä»–çš„é€‰é¡¹é»˜è®¤ å¡«å†™äºŒçº§åŸŸåï¼ˆå³ä¸€çº§åŸŸåä»·æ ¼å‰ç¼€ï¼Œæ¯”å¦‚æˆ‘å½“æ—¶è…¾è®¯äº‘ç”³è¯·çš„ytte.topï¼Œåœ¨æ­¤å‰é¢åŠ ä¸Šè‡ªå·±æƒ³è¦çš„å‰ç¼€gb. ï¼ˆæœ‰ä¸ªè‹±æ–‡ç‚¹å“¦ï¼‰ å…¶ä»–çš„é»˜è®¤ä¸åšæ›´æ”¹ï¼ˆå…³é—­å¿½ç•¥ URL å‚æ•°ï¼‰ï¼Œç‚¹å‡»ã€åˆ›å»ºã€‘  å¦‚å›¾å°†è¿™é‡Œçš„åŸŸåå‰ç¼€å’ŒCNAMEå€¼å¡«å…¥é˜¿é‡Œäº‘æ–°å»ºåŸŸåè§£æä¸‹ã€‚ï¼ˆä¸ƒç‰›äº‘é¡µé¢ä¸è¦å…³é—­ï¼‰  è¿›å…¥é˜¿é‡Œäº‘æ§åˆ¶å° ç‚¹å‡»ã€åŸŸåã€‘ï¼Œç‚¹å‡»ã€åŸŸååˆ—è¡¨ã€‘ï¼Œæ‰¾åˆ°é…ç½®çš„ä¸€çº§åŸŸåç‚¹å‡»ã€è§£æã€‘ ç‚¹å‡»ã€æ·»åŠ è®°å½•ã€‘ï¼Œå°†ä¸Šè¿°çš„åŸŸåå‰ç¼€å’ŒCNAMEå€¼å¡«å…¥ï¼Œè®°å½•ç±»å‹é€‰æ‹©CNAMEã€‚ç‚¹å‡»ã€ç¡®è®¤ã€‘ å¦‚æœé˜¿é‡Œäº‘åŸŸåè§£æçŠ¶æ€æ˜¾ç¤ºæ­£å¸¸ï¼Œå³å¯  å†å›åˆ°ä¸ƒç‰›äº‘ä¸­ï¼Œç­‰å¾… è§‚å¯Ÿæ˜¯å¦è®¾ç½®æˆåŠŸ   å®Œæˆï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ä¸ƒç‰›äº‘ â€”â€”\u0026gt;å¯¹è±¡å­˜å‚¨â€”â€”\u0026gt;ç©ºé—´â€”â€”\u0026gt;ã€æ–‡ä»¶ç®¡ç†ã€‘â€”â€”\u0026gt;å°†æˆ‘ä»¬è®¾ç½®å¥½çš„äºŒçº§åŸŸåè®¾ç½®ä¸ºå¤–é“¾åŸŸåç‚¹å‡»ã€ä¿å­˜é»˜è®¤åŸŸåã€‘â€”â€”\u0026gt;ã€ä¸Šä¼ æ–‡ä»¶ã€‘ï¼Œç„¶åé€šè¿‡ä¸Šä¼ åçš„æ–‡ä»¶ã€æ›´å¤šã€‘â€”â€”\u0026gt;ã€å¤åˆ¶å¤–é“¾ã€‘æ¥è®¿é—®æˆ–è€…ä¸‹è½½æ–‡ä»¶äº†ã€‚ä»åœ°å€å¯ä»¥çœ‹å‡ºæˆ‘ä»¬æ˜¯ä½¿ç”¨åˆšé…ç½®çš„äºŒçº§åŸŸåæ¥è®¿é—®è¿™ä¸ªæ–‡ä»¶çš„ã€‚\n   æå®šï¼\näººç”Ÿæ— å¸¸ï¼Œå¤§è‚ åŒ…å°è‚ ï¼\nç»§ç»­å­¦ä¹ å§ï¼\n","id":4,"section":"posts","summary":"","tags":["åŸŸå"],"title":"äºŒçº§åŸŸå","uri":"https://gb.ytte.top/2022/03/16/%E4%BA%8C%E7%BA%A7%E5%9F%9F%E5%90%8D/","year":"2022"},{"content":"Java8ä¹‹Consumerã€Supplierã€Predicateå’ŒFunctionæ”»ç•¥ - å…¬ä¼—å·å¥½å¥½å­¦java - åšå®¢å›­ (cnblogs.com)\n","id":5,"section":"posts","summary":"","tags":["åŸºç¡€"],"title":"Consumerã€Supplierã€Predicateå’ŒFunction","uri":"https://gb.ytte.top/2022/03/14/consumersupplierpredicate%E5%92%8Cfunction/","year":"2022"},{"content":"ZooKeeper édocker å•æœºï¼ˆæœ¬åœ°ï¼‰å®‰è£…é…ç½®å¯åŠ¨ è§†é¢‘====ã€‹_å“”å“©å“”å“©_bilibili p7\n  éœ€è¦jdkç¯å¢ƒï¼Œå¹¶é…ç½®ç¯å¢ƒå˜é‡\nlinuxå®‰è£…jdk8\n  ä¸‹è½½ZooKeeperå‹ç¼©åŒ…ï¼ˆApache Downloads)æ”¾åœ¨linuxä¸‹çš„/mnt/zookeeperä¸‹ã€‚\n  tar -zxvf apache-zookeeper-3.5.7-bin.tar.gz   å°†æ–‡ä»¶å¤¹æ”¹å\nmv apache-zookeeper-3.5.7-bin/ zookeeper-3.5.7/   æ›´æ”¹confä¸‹ çš„zoo-sample.cfgä¸ºzoo.cfg\n  æ›´æ”¹zoo.cfgä¸­\ndataDir=/mnt/zookeeper/zookeeper-3.5.7/data\rdataLogDir=/mnt/zookeeper/zookeeper-3.5.7/dataLog   å¯åŠ¨æœåŠ¡ç«¯ï¼š\n**æ³¨æ„ï¼š**éœ€è¦åœ¨/mnt/zookeeper/zookeeper-3.5.7/ç›®å½•ä¸‹ä½¿ç”¨å¯åŠ¨å‘½ä»¤bin/zkServer.sh start ä¸èƒ½å†/mnt/zookeeper/zookeeper-3.5.7/bin/ç›®å½•ä¸‹ä½¿ç”¨zkServer.sh start\n  ä½¿ç”¨jps -l æŸ¥çœ‹æ˜¯å¦å¯åŠ¨äº†zookeeper çš„javaè¿›ç¨‹ã€‚\n  å¯åŠ¨å®¢æˆ·ç«¯ï¼š bin/zkCli.sh\n    ls /æŸ¥çœ‹èŠ‚ç‚¹\n  quité€€å‡ºå®¢æˆ·ç«¯\n  bin/zkServer.sh statusæŸ¥çœ‹zookeeperçš„çŠ¶æ€ï¼ˆstandaloneå•æœºæ¨¡å¼ï¼‰\n  bin/zkServer.sh stop åœæ­¢æœåŠ¡å™¨ç«¯\n    docker é…ç½®å‚æ•°è§£è¯» è§†é¢‘====ã€‹p8\n  tickTime=2000â€”â€”é€šä¿¡çš„å¿ƒè·³æ—¶é—´\nZooKeeperæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´é€šä¿¡é¢‘ç‡ï¼Œæ¯2000mså‘é€ä¸€æ¬¡ã€‚\n  initLimit=10â€”â€”LFåˆå§‹é€šä¿¡æ—¶é™\n  Leaderä¸Followeråˆå§‹è¿æ¥æ˜¯\n ","id":6,"section":"posts","summary":"","tags":["ZooKeeper"],"title":"ZooKeeper","uri":"https://gb.ytte.top/2022/03/14/zookeeper/","year":"2022"},{"content":"Filter Filter-CSDNåšå®¢_javaè¿‡æ»¤å™¨\nLstener Filterä¸Listener - ç®€ä¹¦ (jianshu.com)\nListener(ç›‘å¬å™¨)çš„ç®€å•ä»‹ç»_LrvingTcçš„åšå®¢-CSDNåšå®¢_listener\nServlet JavaWebâ€”â€”Servletï¼ˆå…¨ç½‘æœ€è¯¦ç»†æ•™ç¨‹åŒ…æ‹¬Servletæºç åˆ†æï¼‰_æ‰¬ä¿Šçš„å°å±‹-CSDNåšå®¢_servlet\nå››å¤§åŸŸå¯¹è±¡ JavaWebå››å¤§åŸŸå¯¹è±¡ - ç®€ä¹¦ (jianshu.com)\nJAVAä¸­çš„å››å¤§åŸŸå¯¹è±¡æ€»ç»“_kun blog-CSDNåšå®¢_åŸŸå¯¹è±¡\n","id":7,"section":"posts","summary":"","tags":["åŸºç¡€"],"title":"Filter/ Lstener/ Servlet/å››å¤§åŸŸå¯¹è±¡","uri":"https://gb.ytte.top/1/01/01/filter/-lstener/-servlet/%E5%9B%9B%E5%A4%A7%E5%9F%9F%E5%AF%B9%E8%B1%A1/","year":"0001"},{"content":"JVMä¸Šç¯‡ JVMä¸Javaä½“ç³»ç»“æ„ 1. Javaè™šæ‹Ÿæœºæ•´ä½“æ¶æ„ç¥¥å›¾ 2.Javaä»£ç æ‰§è¡Œè¿‡ç¨‹è¯¦å›¾ 3. JVMçš„æ¶æ„æ¨¡å‹","id":8,"section":"posts","summary":"","tags":["JVM"],"title":"JVMä¸Šç¯‡","uri":"https://gb.ytte.top/1/01/01/jvm%E4%B8%8A%E7%AF%87/","year":"0001"},{"content":"MySQL åŸºç¡€ é«˜çº§ 8ã€ ç´¢å¼•çš„åˆ›å»ºä¸è®¾è®¡åŸåˆ™ 2ã€ç´¢å¼•çš„å¿…è¦ä½¿ç”¨åœºæ™¯ 1). å­—æ®µçš„æ•°å€¼æœ‰å”¯ä¸€æ€§çš„é™åˆ¶ ä¸šåŠ¡ä¸Šå…·æœ‰å”¯ä¸€ç‰¹æ€§çš„å­—æ®µï¼Œå³ä½¿æ˜¯ç»„åˆå­—æ®µï¼Œä¹Ÿå¿…é¡»å»ºæˆå”¯ä¸€ç´¢å¼•ã€‚\nè¯´æ˜ï¼šå”¯ä¸€ç´¢å¼•å½±å“äº† insert é€Ÿåº¦ï¼Œè¿™ä¸ªé€Ÿåº¦æŸè€—å¯ä»¥å¿½ç•¥ï¼Œä½†æé«˜æŸ¥æ‰¾é€Ÿåº¦æ˜¯æ˜æ˜¾çš„ã€‚\n2). é¢‘ç¹ä½œä¸º WHERE æŸ¥è¯¢æ¡ä»¶çš„å­—æ®µ æŸä¸ªå­—æ®µåœ¨SELECTè¯­å¥çš„ WHERE æ¡ä»¶ä¸­ç»å¸¸è¢«ä½¿ç”¨åˆ°ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»™è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•äº†ã€‚å°¤å…¶æ˜¯åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œåˆ›å»ºæ™®é€šç´¢å¼•å°±å¯ä»¥å¤§å¹…æå‡æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡ã€‚\næ¯”å¦‚æŸ¥è¯¢ student_id =144324çš„æ—¶å€™\nSELECT course_id ,class_id, `name`,create_time,student_id FROM student_info WHERE student_id =144324   åœ¨student_idä¸åŠ ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œ100wæ¡æ•°æ®ï¼Œè€—æ—¶ä¸º350mså·¦å³ï¼Œå³åœ¨ç™¾æ¯«ç§’çº§\nALTER TABLE student_info ADD INDEX idx_sid(student_id)  SHOW INDEX FROM student_info #æŸ¥çœ‹æ˜¯å¦æ·»åŠ æˆåŠŸ   åœ¨æ·»åŠ ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œè€—æ—¶ä¸º22msï¼Œé™äº†ä¸€ä¸ªæ•°é‡çº§ï¼Œè¿™æ˜¯å¾ˆå®¢è§‚çš„ã€‚\n   3). ç»å¸¸ GROUP BY å’Œ ORDER BY çš„åˆ— ç´¢å¼•å°±æ˜¯è®©æ•°æ®æŒ‰ç…§æŸç§é¡ºåºè¿›è¡Œå­˜å‚¨æˆ–æ£€ç´¢ï¼Œå› æ­¤å½“æˆ‘ä»¬ä½¿ç”¨GROUP BYå¯¹æ•°æ®è¿›è¡Œåˆ†ç»„æŸ¥è¯¢ï¼Œæˆ–è€…ä½¿ç”¨ORDER BYå¯¹æ•°æ®è¿›è¡Œæ’åºçš„æ—¶å€™ï¼Œå°±éœ€è¦å¯¹åˆ†ç»„æˆ–è€…æ’åºçš„å­—æ®µè¿›è¡Œç´¢å¼•ï¼Œä»è€Œå‡å°‘æ’åºçš„æ—¶é—´ã€‚å¦‚æœå¾…æ’åºçš„åˆ—æœ‰å¤šä¸ªï¼Œé‚£ä¹ˆå¯ä»¥åœ¨è¿™äº›åˆ—ä¸Šå»ºç«‹ç»„åˆç´¢å¼•ã€‚\n1. GROUP BY egï¼šåœ¨100wæ¡æ•°æ®ä¸­ï¼ŒæŒ‰ç…§student_idå¯¹å­¦ç”Ÿé€‰ä¿®è¯¾ç¨‹è¿›è¡Œåˆ†ç»„ï¼Œæ˜¾ç¤ºä¸åŒçš„student_idå’Œè¯¾ç¨‹æ•°é‡ï¼Œæ˜¾ç¤º100ä¸ªã€‚\nSELECT student_id ,COUNT(*) AS num FROM student_info GROUP BY student_id LIMIT 100  DROP INDEX idx_sid ON student_info SHOW INDEX FROM student_info  åœ¨ä¸åŠ ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œè€—æ—¶850æ¯«ç§’ã€‚ åœ¨åŠ ç´¢å¼•çš„æƒ…å†µä¸‹ï¼ˆè¿™é‡Œä½¿ç”¨çš„æ˜¯2ï¼‰å½“ä¸­çš„idx_sidç´¢å¼•ï¼‰ï¼Œè€—æ—¶21æ¯«ç§’ã€‚  2. ORDER BY ORDER BYå•ç‹¬ä½¿ç”¨çš„æƒ…å†µä¸GROUP BYå·®ä¸å¤š\n3. ORDER BYå’ŒGROUP BYåŒæ—¶ä½¿ç”¨çš„æƒ…å†µ ==ç”±äºGROUP BYå…ˆæ‰§è¡Œï¼Œä¸”GROUP BYä¸ºå…ˆæ’åºå†åˆ†ç»„ï¼Œæ‰€ä»¥ä¸»è¦è€—æ—¶å°±é›†ä¸­åœ¨GROUP BYä¸Šã€‚==\nä½¿ç”¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µæ¥è§‚å¯Ÿä¸åŒç´¢å¼•çŠ¶å†µä¸‹ï¼Œsqlæ‰§è¡Œçš„é€Ÿåº¦å·®å¼‚\n ä¸‰ç§æƒ…å†µï¼š  â€‹\tâ‘ . student_idå’Œcreate_timeåˆ†åˆ«å»ºç«‹ç´¢å¼•\nâ€‹\tâ‘¡. student_idå’Œcreate_timeå»ºç«‹è”åˆç´¢å¼•ï¼Œä¸”student_idåœ¨å‰\nâ€‹\tâ‘¢. student_idå’Œcreate_timeå»ºç«‹è”åˆç´¢å¼•ï¼Œä¸”create_timeåœ¨å‰\nSELECT student_id,COUNT(*)\tAS\tnum\tFROM\tstudent_info GROUP BY\tstudent_id ORDER BY\tcreate_time desc LIMIT 100 ä¸åŠ é™¤ä¸»é”®ç´¢å¼•ä»¥å¤–çš„å…¶ä»–ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œè€—æ—¶çº¦==0.8~1s==\n ä¸¤ç§ç‰ˆæœ¬ï¼š  â€‹\tâ‘ . MySQL 5.7.5åŠä»¥ä¸ŠåŠŸèƒ½ä¾èµ–æ£€æµ‹åŠŸèƒ½\nâ€‹\tâ‘¡. MySQL 5.7.5ä»¥ä¸‹æ— ä¾èµ–æ£€æµ‹åŠŸèƒ½\næ‰§è¡Œä¸Šæ–¹ä»£ç åMySQL 5.7.5åŠä»¥ä¸Šä¼šæŠ¥é”™\nsql_mode=only_full_group_by #å‡ºç°é—®é¢˜ MySQL 5.7.5åŠä»¥ä¸Šç”±äºsql_mode=only_full_group_byæ˜¯é»˜è®¤å¼€å¯ä¾èµ–æ£€æµ‹åŠŸèƒ½ï¼Œæ‰€ä»¥HAVINGæ¡ä»¶æˆ–ORDER BYåˆ—è¡¨çš„æŸ¥è¯¢å¼•ç”¨åœ¨GROUP BYå­å¥ä¸­ã€‚ ç®€å•æ¥è¯´å°±æ˜¯ï¼šè¾“å‡ºçš„ç»“æœæ˜¯å«target listï¼Œå°±æ˜¯selectåé¢è·Ÿç€çš„å­—æ®µï¼Œè¿˜æœ‰ä¸€ä¸ªåœ°æ–¹group by columnï¼Œå°±æ˜¯group byåé¢è·Ÿç€çš„å­—æ®µã€‚ç”±äºå¼€å¯ONLY_FULL_GROUP_BYçš„è®¾ç½®ï¼Œå¦‚æœä¸€ä¸ªå­—æ®µæ²¡æœ‰åœ¨target listå’Œgroup byå­—æ®µä¸­åŒæ—¶å‡ºç°ï¼Œæˆ–è€…æ˜¯èšåˆå‡½æ•°çš„å€¼çš„è¯ï¼Œé‚£ä¹ˆè¿™æ¡sqlæŸ¥è¯¢æ˜¯è¢«mysqlè®¤ä¸ºéæ³•çš„ï¼Œä¼šæŠ¥é”™è¯¯ã€‚\nä½†æ˜¯å¦‚æœåŒæ—¶GROUP BY student_idï¼Œcreate_time è¿™ä¸¤ä¸ªå­—æ®µï¼Œå°±å¤±å»äº†æœ¬ä¾‹çš„ä½œç”¨ã€‚æ‰€ä»¥éœ€è¦MySQL 5.7.5åŠä»¥ä¸Šçš„éœ€è¦å…³é—­ä¾èµ–æ£€æµ‹åŠŸèƒ½\nå…·ä½“è§£æé“¾æ¥====ã€‹æ–‡æ¡£â€”â€”çŸ³å¢¨\nselect @@global.sql_mode #æŸ¥çœ‹sql_modeè¯¦ç»†  set @@global.sql_mode =\u0026#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\u0026#39;; #å»æ‰ONLY_FULL_GROUP_BYï¼Œé‡æ–°è®¾ç½®å€¼ï¼Œå¯¹äºæ–°å»ºçš„æ•°æ®åº“æœ‰æ•ˆ 8.0ä¸­è¿˜è¦å»æ‰NO_AUTO_CREATE_USER  set global sql_mode=\u0026#39;STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\u0026#39;; #å¯¹äºå·²å­˜åœ¨çš„æ•°æ®åº“ï¼Œåˆ™éœ€è¦åœ¨å¯¹åº”çš„æ•°æ®ä¸‹æ‰§è¡Œ ç»§ç»­æµ‹è¯•\n  æ·»åŠ å•åˆ—student_idç´¢å¼•å’Œcreate_timeç´¢å¼•\nâ€‹\t5.7ä¸­ï¼š\nè€—æ—¶6så·¦å³ï¼Œæ·»åŠ ç´¢å¼•å°±æ˜¯å°†è¿™äº›æ—¶é—´æå‰æ¶ˆè€—æ‰ï¼Œè®©å®¢æˆ·æŸ¥è¯¢çš„æ—¶å€™å‡å°‘æŸ¥è¯¢æ—¶é—´ã€‚\nALTER TABLE student_info ADD INDEX idx_sid(student_id);  ALTER TABLE student_info ADD INDEX idx_cre_time(create_time DESC); è¿™é‡Œ EXPLAIN åä¼šå‘ç°åªä½¿ç”¨äº†student_id çš„ç´¢å¼•idx_sidï¼ˆå•åˆ—ç´¢å¼•çš„æƒ…å†µï¼Œåªä½¿ç”¨è¯­å¥æ‰§è¡Œè¿‡ç¨‹ç¬¬ä¸€ä¸ªç´¢å¼•ï¼‰æ‰€ä»¥è¿™é‡Œåªä½¿ç”¨äº†ç´¢å¼•idx_sidï¼Œè€Œidx_cre_timeå‹æ ¹æ²¡ç”¨åˆ°ã€‚\nSHOW INDEX FROM student_info  EXPLAIN  SELECT student_id,COUNT(*)\tAS\tnum\tFROM\tstudent_info GROUP BY\tstudent_id ORDER BY\tcreate_time DESC LIMIT 100; å„è‡ªå•åˆ—ç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œè€—æ—¶å¤§çº¦1.5sï¼ˆä¸Šé¢ä¸åŠ ç´¢å¼•çš„æƒ…å†µä¸‹è€—æ—¶1sï¼‰\nâ€‹\t8.0ä¸­\n==todo ä¸æ˜åŸå› ï¼Œæœªå¾—åˆ°è§£å†³ï¼Œä¸Šè¿°æ–¹å¼åœ¨5.7ä¸­å¤§çº¦éœ€è¦1.5så·¦å³ï¼Œè€Œåœ¨8.0ä¸­éœ€è¦å‡ åˆ†é’Ÿçš„æ—¶é—´ã€‚==\n  è”åˆç´¢å¼•çš„æƒ…å†µâ‘  ï¼š\nå…ˆåˆ é™¤é™¤ä¸»é”®å¤–å…¶ä»–çš„å•åˆ—ç´¢å¼•\nidx_sid_cre_time(student_id,create_time)ï¼Œstudent_idåœ¨å‰\nâ€‹\t5.7ï¼š\nALTER TABLE student_info ADD INDEX idx_sid_cre_time(student_id,create_time);  SHOW INDEX FROM student_info;  EXPLAIN  SELECT student_id,COUNT(*)\tAS\tnum\tFROM\tstudent_info GROUP BY\tstudent_id ORDER BY\tcreate_time DESC LIMIT 100; è€—æ—¶çº¦==300ms==å·¦å³ï¼ˆæœªåŠ ç´¢å¼•1så·¦å³ï¼Œå•åˆ—ç´¢å¼•1.5så·¦å³ï¼‰\n8.0ï¼š\nDROP INDEX idx_sid ON student_info ; DROP INDEX idx_cre_time ON student_info; DROP INDEX idx_sid_cre_time ON student_info;  ALTER TABLE student_info ADD INDEX idx_sid_cre_time(student_id,create_time DESC);  SHOW INDEX FROM student_info;  EXPLAIN  SELECT student_id,COUNT(*)\tAS\tnum\tFROM\tstudent_info GROUP BY\tstudent_id ORDER BY\tcreate_time DESC LIMIT 100;   ç´¢å¼•ä¸åŠ DESCæ—¶ï¼Œè€—æ—¶çº¦==800ms==å·¦å³ï¼ˆä¸åŠ ç´¢å¼•1så·¦å³ï¼Œå•åˆ—ç´¢å¼•å‡ åˆ†é’Ÿï¼‰\n  ç´¢å¼•åŠ DESCæ—¶ï¼Œè€—æ—¶çº¦==300ms==å·¦å³ï¼ˆä¸åŠ ç´¢å¼•1så·¦å³ï¼Œå•åˆ—ç´¢å¼•å‡ åˆ†é’Ÿï¼‰\n    è”åˆç´¢å¼•çš„æƒ…å†µâ‘¡ ï¼š\nidx_cre_sid_time(create_time,student_id)ï¼Œcreate_timeåœ¨å‰\nåœ¨è¯­å¥æ‰§è¡Œä¸­ï¼Œå…ˆè¿›è¡Œgroup by æ‰€ä»¥æ­¤æ—¶å¦‚æœå­˜åœ¨idx_sid(student_id)çš„è¯ï¼Œä¼šä¼˜å…ˆä½¿ç”¨group by student_idçš„student_idç´¢å¼•ï¼ˆidx_sidï¼‰ï¼Œè¿™æ ·å°±å˜æˆäº†ä½¿ç”¨å•åˆ—ç´¢å¼•ï¼Œè”åˆç´¢å¼•idx_sid_cre_timeå°±ä¸èµ·ä½œç”¨äº†ã€‚\nå¦‚æœä¸å­˜åœ¨idx_sidï¼Œåªæœ‰è”åˆç´¢å¼•idx_cre_sid_timeï¼š\nâ€‹ 5.7ï¼š\nDROP INDEX idx_sid ON student_info ; DROP INDEX idx_cre_time ON student_info; DROP INDEX idx_sid_cre_time ON student_info;  ALTER TABLE student_info ADD INDEX idx_cre_sid_time(create_time,student_id);  SELECT student_id,COUNT(*)\tAS\tnum\tFROM\tstudent_info GROUP BY\tstudent_id ORDER BY\tcreate_time DESC LIMIT 100; è€—æ—¶çº¦==800mså·¦å³== ï¼ˆæœªåŠ ç´¢å¼•1så·¦å³ï¼Œå•åˆ—ç´¢å¼•1.5så·¦å³ï¼Œidx_sid_cre_timeç´¢å¼•è€—æ—¶çº¦300msï¼‰\nâ€‹ 8.0 ï¼š\nDROP INDEX idx_sid ON student_info ; DROP INDEX idx_cre_time ON student_info; DROP INDEX idx_sid_cre_time ON student_info; DROP INDEX idx_cre_sid_time ON student_info;  ALTER TABLE student_info ADD INDEX idx_cre_sid_time(create_time DESC,student_id);  SELECT student_id,COUNT(*)\tAS\tnum\tFROM\tstudent_info GROUP BY\tstudent_id ORDER BY\tcreate_time DESC LIMIT 100;   ç´¢å¼•ä¸åŠ DESCæ—¶ï¼Œè€—æ—¶çº¦==1s==å·¦å³ï¼ˆä¸åŠ ç´¢å¼•1så·¦å³ï¼Œå•åˆ—ç´¢å¼•å‡ åˆ†é’Ÿï¼Œidx_sid_cre_timeç´¢å¼•800mså·¦å³ï¼‰\n  ç´¢å¼•åŠ DESCæ—¶ï¼Œè€—æ—¶çº¦==1s==å·¦å³ï¼ˆä¸åŠ ç´¢å¼•1så·¦å³ï¼Œå•åˆ—ç´¢å¼•å‡ åˆ†é’Ÿï¼Œidx_sid_cre_timeç´¢å¼•300mså·¦å³ï¼‰\n    4). UPDATEã€DELETE çš„ WHERE æ¡ä»¶åˆ— å¯¹æ•°æ®æŒ‰ç…§æŸä¸ªæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢åå†è¿›è¡Œ UPDATE æˆ– DELETE çš„æ“ä½œï¼Œå¦‚æœå¯¹ WHERE å­—æ®µåˆ›å»ºäº†ç´¢å¼•ï¼Œå°±èƒ½å¤§å¹…æå‡æ•ˆç‡ã€‚\nåŸç†æ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦å…ˆæ ¹æ® WHERE æ¡ä»¶åˆ—æ£€ç´¢å‡ºæ¥è¿™æ¡è®°å½•ï¼Œç„¶åå†å¯¹å®ƒè¿›è¡Œæ›´æ–°æˆ–åˆ é™¤ã€‚å¦‚æœè¿›è¡Œæ›´æ–°çš„æ—¶å€™ï¼Œæ›´æ–°çš„å­—æ®µæ˜¯éç´¢å¼•å­—æ®µï¼Œæå‡çš„æ•ˆç‡ä¼šæ›´æ˜æ˜¾ï¼Œè¿™æ˜¯å› ä¸ºéç´¢å¼•å­—æ®µæ›´æ–°ä¸éœ€è¦å¯¹ç´¢å¼•è¿›è¡Œç»´æŠ¤ã€‚\n5). DISTINCT å­—æ®µéœ€è¦åˆ›å»ºç´¢å¼• æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å¯¹æŸä¸ªå­—æ®µè¿›è¡Œå»é‡ï¼Œä½¿ç”¨ DISTINCTï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œä¹Ÿä¼šæå‡æŸ¥è¯¢æ•ˆç‡ã€‚\næ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢è¯¾ç¨‹è¡¨ä¸­ä¸åŒçš„ student_id éƒ½æœ‰å“ªäº›ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰å¯¹ student_id åˆ›å»ºç´¢å¼•ï¼Œæ‰§è¡Œ\nSQL è¯­å¥ï¼š\nSELECT DISTINCT(student_id) FROM `student_info`; è¿è¡Œç»“æœï¼ˆ600637 æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´ 0.683s ï¼‰ï¼š\nå¦‚æœæˆ‘ä»¬å¯¹ student_id åˆ›å»ºç´¢å¼•ï¼Œå†æ‰§è¡Œ SQL è¯­å¥ï¼š\nSELECT DISTINCT(student_id) FROM `student_info`; è¿è¡Œç»“æœï¼ˆ600637 æ¡è®°å½•ï¼Œè¿è¡Œæ—¶é—´ 0.010s ï¼‰ï¼š\nSQL æŸ¥è¯¢æ•ˆç‡æœ‰äº†æå‡ï¼ŒåŒæ—¶æ˜¾ç¤ºå‡ºæ¥çš„ student_id è¿˜æ˜¯æŒ‰ç…§ é€’å¢çš„é¡ºåº è¿›è¡Œå±•ç¤ºçš„ã€‚è¿™æ˜¯å› ä¸ºç´¢å¼•ä¼šå¯¹æ•°æ®æŒ‰ç…§æŸç§é¡ºåºè¿›è¡Œæ’åºï¼Œæ‰€ä»¥åœ¨å»é‡çš„æ—¶å€™ä¹Ÿä¼šå¿«å¾ˆå¤šã€‚\n6). å¤šè¡¨ JOIN è¿æ¥æ“ä½œæ—¶ï¼Œåˆ›å»ºç´¢å¼•æ³¨æ„äº‹é¡¹ é¦–å…ˆï¼Œ ==è¿æ¥è¡¨çš„æ•°é‡å°½é‡ä¸è¦è¶…è¿‡ 3 å¼ ==ï¼Œå› ä¸ºæ¯å¢åŠ ä¸€å¼ è¡¨å°±ç›¸å½“äºå¢åŠ äº†ä¸€æ¬¡åµŒå¥—çš„å¾ªç¯ï¼Œæ•°é‡çº§å¢é•¿ä¼šéå¸¸å¿«ï¼Œä¸¥é‡å½±å“æŸ¥è¯¢çš„æ•ˆç‡ã€‚\nå…¶æ¬¡ï¼Œ å¯¹ WHERE æ¡ä»¶åˆ›å»ºç´¢å¼• ï¼Œå› ä¸º WHERE æ‰æ˜¯å¯¹æ•°æ®æ¡ä»¶çš„è¿‡æ»¤ã€‚å¦‚æœåœ¨æ•°æ®é‡éå¸¸å¤§çš„æƒ…å†µä¸‹ï¼Œæ²¡æœ‰ WHERE æ¡ä»¶è¿‡æ»¤æ˜¯éå¸¸å¯æ€•çš„ã€‚\næœ€åï¼Œ==ç±»ä¼¼å­—ç¬¦ä¸²å’Œintæ¯”è¾ƒæ—¶ï¼Œä¼šå­˜åœ¨éšå¼è½¬æ¢ï¼Œå³ä½¿ç”¨äº†å‡½æ•°ï¼Œä¸€æ—¦ä½¿ç”¨äº†å‡½æ•°å°±ä¼šè®©ç´¢å¼•å¤±æ•ˆã€‚ å¯¹ç”¨äºè¿æ¥çš„å­—æ®µåˆ›å»ºç´¢å¼• ï¼Œå¹¶ä¸”è¯¥å­—æ®µåœ¨å¤šå¼ è¡¨ä¸­çš„ ç±»å‹å¿…é¡»ä¸€è‡´ ã€‚==æ¯”å¦‚ course_id åœ¨ student_info è¡¨å’Œ course è¡¨ä¸­éƒ½ä¸º int(11) ç±»å‹ï¼Œè€Œä¸èƒ½ä¸€ä¸ªä¸º int å¦ä¸€ä¸ªä¸º varchar ç±»å‹ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬åªå¯¹ student_id åˆ›å»ºç´¢å¼•ï¼Œæ‰§è¡Œ SQL è¯­å¥ï¼š\nSELECT course_id, name, student_info.student_id, course_name FROM student_info JOIN course ON student_info.course_id = course.course_id WHERE name = \u0026#39;462eed7ac6e791292a79\u0026#39;; è¿è¡Œç»“æœï¼ˆ1 æ¡æ•°æ®ï¼Œè¿è¡Œæ—¶é—´ 0.189s ï¼‰ï¼š\nè¿™é‡Œæˆ‘ä»¬å¯¹ name åˆ›å»ºç´¢å¼•ï¼Œå†æ‰§è¡Œä¸Šé¢çš„ SQL è¯­å¥ï¼Œè¿è¡Œæ—¶é—´ä¸º 0.002s ã€‚\n7). ä½¿ç”¨åˆ—çš„ç±»å‹å°çš„åˆ›å»ºç´¢å¼• 8). ä½¿ç”¨å­—ç¬¦ä¸²å‰ç¼€åˆ›å»ºç´¢å¼• åˆ›å»ºä¸€å¼ å•†æˆ·è¡¨ï¼Œå› ä¸ºåœ°å€å­—æ®µæ¯”è¾ƒé•¿ï¼Œåœ¨åœ°å€å­—æ®µä¸Šå»ºç«‹å‰ç¼€ç´¢å¼•\ncreate table shop(address varchar(120) not null);  alter table shop add index(address(12)); é—®é¢˜æ˜¯ï¼Œæˆªå–å¤šå°‘å‘¢ï¼Ÿæˆªå–å¾—å¤šäº†ï¼Œè¾¾ä¸åˆ°èŠ‚çœç´¢å¼•å­˜å‚¨ç©ºé—´çš„ç›®çš„ï¼›æˆªå–å¾—å°‘äº†ï¼Œé‡å¤å†…å®¹å¤ªå¤šï¼Œå­—\næ®µçš„æ•£åˆ—åº¦(é€‰æ‹©æ€§)ä¼šé™ä½ã€‚æ€ä¹ˆè®¡ç®—ä¸åŒçš„é•¿åº¦çš„é€‰æ‹©æ€§å‘¢ï¼Ÿ\nå…ˆçœ‹ä¸€ä¸‹å­—æ®µåœ¨å…¨éƒ¨æ•°æ®ä¸­çš„é€‰æ‹©åº¦ï¼š\nselect count(distinct address) / count(*) from shop; é€šè¿‡ä¸åŒé•¿åº¦å»è®¡ç®—ï¼Œä¸å…¨è¡¨çš„é€‰æ‹©æ€§å¯¹æ¯”ï¼š\nå…¬å¼ï¼š\ncount(distinct left(åˆ—å, ç´¢å¼•é•¿åº¦))/count(*) ä¾‹å¦‚ï¼š\nselect count(distinct left(address,10)) / count(*) as sub10, -- æˆªå–å‰10ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦ count(distinct left(address,15)) / count(*) as sub11, -- æˆªå–å‰15ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦ count(distinct left(address,20)) / count(*) as sub12, -- æˆªå–å‰20ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦ count(distinct left(address,25)) / count(*) as sub13 -- æˆªå–å‰25ä¸ªå­—ç¬¦çš„é€‰æ‹©åº¦ from shop; å¼•ç”³å¦ä¸€ä¸ªé—®é¢˜ï¼šç´¢å¼•åˆ—å‰ç¼€å¯¹æ’åºçš„å½±å“\næ‹“å±•ï¼šAlibabaã€ŠJavaå¼€å‘æ‰‹å†Œã€‹\n==åœ¨ varchar å­—æ®µä¸Šå»ºç«‹ç´¢å¼•æ—¶ï¼Œå¿…é¡»æŒ‡å®šç´¢å¼•é•¿åº¦ï¼Œæ ¹æ®å®é™…æ–‡æœ¬åŒºåˆ†åº¦å†³å®šç´¢å¼•é•¿åº¦ã€‚==\nè¯´æ˜ï¼šç´¢å¼•çš„é•¿åº¦ä¸åŒºåˆ†åº¦æ˜¯ä¸€å¯¹çŸ›ç›¾ä½“ï¼Œä¸€èˆ¬å¯¹å­—ç¬¦ä¸²ç±»å‹æ•°æ®ï¼Œé•¿åº¦ä¸º 20 çš„ç´¢å¼•ï¼ŒåŒºåˆ†åº¦ä¼š é«˜è¾¾ 90% ä»¥ä¸Š ï¼Œå¯ä»¥ä½¿ç”¨\n count(distinct left(åˆ—å, ç´¢å¼•é•¿åº¦))/count(*)çš„åŒºåˆ†åº¦æ¥ç¡®å®šã€‚\n9). åŒºåˆ†åº¦é«˜(æ•£åˆ—æ€§é«˜)çš„åˆ—é€‚åˆä½œä¸ºç´¢å¼• 10). ä½¿ç”¨æœ€é¢‘ç¹çš„åˆ—æ”¾åˆ°è”åˆç´¢å¼•çš„å·¦ä¾§ 11). åœ¨å¤šä¸ªå­—æ®µéƒ½è¦åˆ›å»ºç´¢å¼•çš„æƒ…å†µä¸‹ï¼Œè”åˆç´¢å¼•ä¼˜äºå•å€¼ç´¢å¼• 3. é™åˆ¶ç´¢å¼•çš„æ•°ç›® 4. å“ªäº›æƒ…å†µä¸é€‚åˆåˆ›å»ºç´¢å¼•  WHEREæ¡ä»¶ï¼ˆåŒ…æ‹¬GROUP BYã€ORDER BY)é‡Œç”¨ä¸åˆ°çš„å­—æ®µä¸éœ€è¦åˆ›å»ºç´¢å¼• æ•°æ®é‡å°çš„è¡¨æœ€å¥½ä¸è¦ä½¿ç”¨ç´¢å¼• æœ‰å¤§é‡é‡å¤æ•°æ®çš„åˆ—ä¸Šä¸è¦å»ºç«‹ç´¢å¼•  æ¯”å¦‚æ€§åˆ«ã€‚   é¿å…å¯¹ç»å¸¸æ›´æ–°çš„è¡¨åˆ›å»ºè¿‡å¤šçš„ç´¢å¼• ä¸å»ºè®®ç”¨æ— åºçš„å€¼ä½œä¸ºç´¢å¼•  ä¾‹å¦‚èº«ä»½è¯ã€UUID(åœ¨ç´¢å¼•æ¯”è¾ƒæ—¶éœ€è¦è½¬ä¸ºASCIIï¼Œå¹¶ä¸”æ’å…¥æ—¶å¯èƒ½é€ æˆé¡µåˆ†è£‚)ã€MD5ã€HASHã€æ— åºé•¿å­—ç¬¦ä¸²ç­‰ã€‚   åˆ é™¤ä¸å†ä½¿ç”¨æˆ–è€…å¾ˆå°‘ä½¿ç”¨çš„ç´¢å¼• ä¸è¦å®šä¹‰å†—ä½™æˆ–é‡å¤çš„ç´¢å¼•  å°è®°  æˆ‘ä»¬è¿›è¡Œå†…è”æŸ¥è¯¢å‰ï¼Œæœ€å¥½èƒ½é™åˆ¶è¿çš„è¡¨å¤§å°çš„æ¡ä»¶éƒ½å…ˆç”¨ä¸Šäº†ï¼ŒåŒæ—¶å°½é‡è®©æ¡ä»¶æŸ¥è¯¢å’Œåˆ†ç»„æ‰§è¡Œçš„è¡¨å°½é‡å°====ã€‹CSDNåšå®¢_mysqlè”è¡¨æŸ¥è¯¢ä¼˜åŒ–â‘    ","id":9,"section":"posts","summary":"","tags":["MySQL"],"title":"MySQL","uri":"https://gb.ytte.top/1/01/01/mysql/","year":"0001"},{"content":"å½»åº•å¼„æ‡‚sessionï¼Œcookieï¼Œtoken - SegmentFault æ€å¦\nå½»åº•ç†è§£cookieï¼Œsessionï¼Œtoken - å¢¨é¢œä¸¶ - åšå®¢å›­ (cnblogs.com)\n","id":10,"section":"posts","summary":"","tags":["åŸºç¡€"],"title":"sessionï¼Œcookieï¼Œtoken","uri":"https://gb.ytte.top/1/01/01/sessioncookietoken/","year":"0001"},{"content":"SpringBoot 5. webå¼€å‘ 3. è¯·æ±‚å‚æ•°å¤„ç† 1. æ™®é€šå‚æ•°ä¸åŸºæœ¬æ³¨è§£ 1.1æ³¨è§£ è§†é¢‘====ã€‹å°šç¡…è°·é›·ç¥SpringBoot2_bilibili\n@PathVariableã€\n@RequestHeaderã€\n@ModelAttributeã€\n@RequestParamã€\n@MatrixVariableï¼ˆçŸ©é˜µå˜é‡ï¼‰ã€\n@CookieValueã€\n@RequestBody\n@RestController public class ParameterTestController {    // car/2/owner/zhangsan  @GetMapping(\u0026#34;/car/{id}/owner/{username}\u0026#34;)  public Map\u0026lt;String,Object\u0026gt; getCar(@PathVariable(\u0026#34;id\u0026#34;) Integer id,  @PathVariable(\u0026#34;username\u0026#34;) String name,  @PathVariable Map\u0026lt;String,String\u0026gt; pv,  @RequestHeader(\u0026#34;User-Agent\u0026#34;) String userAgent,  @RequestHeader Map\u0026lt;String,String\u0026gt; header,  @RequestParam(\u0026#34;age\u0026#34;) Integer age,  @RequestParam(\u0026#34;inters\u0026#34;) List\u0026lt;String\u0026gt; inters,  @RequestParam Map\u0026lt;String,String\u0026gt; params,  @CookieValue(\u0026#34;_ga\u0026#34;) String _ga,  @CookieValue(\u0026#34;_ga\u0026#34;) Cookie cookie){    Map\u0026lt;String,Object\u0026gt; map = new HashMap\u0026lt;\u0026gt;();  // map.put(\u0026#34;id\u0026#34;,id); // map.put(\u0026#34;name\u0026#34;,name); // map.put(\u0026#34;pv\u0026#34;,pv); // map.put(\u0026#34;userAgent\u0026#34;,userAgent); // map.put(\u0026#34;headers\u0026#34;,header);  map.put(\u0026#34;age\u0026#34;,age);  map.put(\u0026#34;inters\u0026#34;,inters);  map.put(\u0026#34;params\u0026#34;,params);  map.put(\u0026#34;_ga\u0026#34;,_ga);  System.out.println(cookie.getName()+\u0026#34;===\u0026gt;\u0026#34;+cookie.getValue());  return map;  }    @PostMapping(\u0026#34;/save\u0026#34;)  public Map postMethod(@RequestBody String content){  Map\u0026lt;String,Object\u0026gt; map = new HashMap\u0026lt;\u0026gt;();  map.put(\u0026#34;content\u0026#34;,content);  return map;  }    //1ã€è¯­æ³•ï¼š è¯·æ±‚è·¯å¾„ï¼š/cars/sell;low=34;brand=byd,audi,yd  //2ã€SpringBooté»˜è®¤æ˜¯ç¦ç”¨äº†çŸ©é˜µå˜é‡çš„åŠŸèƒ½  // æ‰‹åŠ¨å¼€å¯ï¼šåŸç†ã€‚å¯¹äºè·¯å¾„çš„å¤„ç†ã€‚UrlPathHelperè¿›è¡Œè§£æã€‚  // removeSemicolonContentï¼ˆç§»é™¤åˆ†å·å†…å®¹ï¼‰æ”¯æŒçŸ©é˜µå˜é‡çš„  //3ã€çŸ©é˜µå˜é‡å¿…é¡»æœ‰urlè·¯å¾„å˜é‡æ‰èƒ½è¢«è§£æ  @GetMapping(\u0026#34;/cars/{path}\u0026#34;)  public Map carsSell(@MatrixVariable(\u0026#34;low\u0026#34;) Integer low,  @MatrixVariable(\u0026#34;brand\u0026#34;) List\u0026lt;String\u0026gt; brand,  @PathVariable(\u0026#34;path\u0026#34;) String path){  Map\u0026lt;String,Object\u0026gt; map = new HashMap\u0026lt;\u0026gt;();   map.put(\u0026#34;low\u0026#34;,low);  map.put(\u0026#34;brand\u0026#34;,brand);  map.put(\u0026#34;path\u0026#34;,path);  return map;  }   // /boss/1;age=20/2;age=10   @GetMapping(\u0026#34;/boss/{bossId}/{empId}\u0026#34;)  public Map boss(@MatrixVariable(value = \u0026#34;age\u0026#34;,pathVar = \u0026#34;bossId\u0026#34;) Integer bossAge,  @MatrixVariable(value = \u0026#34;age\u0026#34;,pathVar = \u0026#34;empId\u0026#34;) Integer empAge){  Map\u0026lt;String,Object\u0026gt; map = new HashMap\u0026lt;\u0026gt;();   map.put(\u0026#34;bossAge\u0026#34;,bossAge);  map.put(\u0026#34;empAge\u0026#34;,empAge);  return map;   }  } ","id":11,"section":"posts","summary":"","tags":["SpringBoot"],"title":"SpringBoot","uri":"https://gb.ytte.top/1/01/01/springboot/","year":"0001"},{"content":"SpringCloud alibaba","id":12,"section":"posts","summary":"","tags":["SpringCloud"],"title":"SpringCloud alibaba","uri":"https://gb.ytte.top/1/01/01/springcloud-alibaba/","year":"0001"},{"content":"çº¿ç¨‹çš„å®ç°æ–¹å¼åŠå…¶ä¼˜ç¼ºç‚¹ ç»§æ‰¿Threadç±» public class TestCode1 extends Thread { \tprivate int i; \tpublic void run() \t{ \tfor(;i\u0026lt;100;i++) \t{ \tSystem.out.println(getName()+\u0026#34; \u0026#34;+i); \t} \t} \tpublic static void main(String[] args) \t{ \tfor(int i=0;i\u0026lt;100;i++) \t{ \tSystem.out.println(Thread.currentThread().getName()+\u0026#34; \u0026#34;+i); \tif(i==20){ \tnew TestCode1().start(); \tnew TestCode1().start(); \t} \t} \t} } å®ç°Runnableæ¥å£  å®ç°Runnableæ¥å£ï¼Œé‡å†™runæ–¹æ³•ï¼Œå®ä¾‹è¦ä½œä¸ºThreadçš„targetæ¥åˆ›å»ºå¯¹è±¡ï¼Œthread.start()ï¼ˆæ¨èè¿™ç§ï¼Œæ¸…æ´—å¯è§ï¼‰  class MyRunnable implements Runnable{  @Override  public void run() {  for (int i = 0; i \u0026lt; 20; i++) {  System.out.println(Thread.currentThread().getName()+\u0026#34; \u0026#34;+i);  }  } } public class MyThread {  public static void main(String[] args) {  //åˆ›å»ºè‡ªå®šä¹‰ç±»å¯¹è±¡ çº¿ç¨‹ä»»åŠ¡å¯¹è±¡  MyRunnable mr = new MyRunnable();  //åˆ›å»ºçº¿ç¨‹å¯¹è±¡  Thread t = new Thread(mr, \u0026#34;å°å¼º\u0026#34;);  t.start();  for (int i = 0; i \u0026lt; 20; i++) {  System.out.println(\u0026#34;æ—ºè´¢ \u0026#34; + i);  }  } }  æˆ–è€…åœ¨æ–¹æ³•å†…ç›´æ¥é‡å†™  public class MyThread {  public static void main(String[] args) {   Runnable r = new Runnable(){  public void run(){  for (int i = 0; i \u0026lt; 20; i++) {  System.out.println(\u0026#34;å¼ å®‡:\u0026#34;+i);  }  }  };  new Thread(r).start();  } }  ç›´æ¥lambdaåˆ›å»ºRunnableå®ç°ç±»  public class MyThread {  public static void main(String[] args) {  Runnable r = () -\u0026gt; {  for (int i = 0; i \u0026lt; 20; i++) {  System.out.println(\u0026#34;å¼ å®‡:\u0026#34;+i);  }  };  new Thread(r).start();  } } å®ç°Callableæ¥å£   åˆ›å»ºCallableæ¥å£çš„å®ç°ç±»ï¼Œå¹¶å®ç°Callï¼ˆï¼‰æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å°†ä½œä¸ºçº¿ç¨‹æ‰§è¡Œä½“ï¼Œä¸”è¯¥æ–¹æ³•æœ‰è¿”å›å€¼ï¼Œå†åˆ›å»ºCallableå®ç°ç±»çš„å®ä¾‹ã€‚ä»Java8å¼€å§‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼åˆ›å»ºCallableå¯¹è±¡ã€‚\n  ä½¿ç”¨FutureTaskæ¥åŒ…è£…Callableå¯¹è±¡ï¼Œè¯¥FutureTaskå¯¹è±¡å°è£…äº†è¯¥Callableå¯¹è±¡çš„callæ–¹æ³•çš„è¿”å›å€¼ã€‚\n  ä½¿ç”¨FutureTaskå¯¹è±¡ä½œä¸ºThreadå¯¹è±¡çš„targetåˆ›å»ºå¹¶å¯åŠ¨æ–°çº¿ç¨‹ã€‚\n  è°ƒç”¨FutureTaskå¯¹è±¡çš„getï¼ˆï¼‰æ–¹æ³•æ¥è·å–å­çº¿ç¨‹æ‰§è¡Œç»“æŸåçš„è¿”å›å€¼ã€‚\n  class MyCallable implements Callable {  @Override  public Object call() throws Exception {  int i = 0;  for (; i \u0026lt; 100; i++) {  Thread.sleep(100);  System.out.println(Thread.currentThread().getName() + \u0026#34;å¾ªç¯éå†içš„å€¼\u0026#34; + i);  }  return null;  } } public class ThreadTest {  public static void main(String[] args) {  Callable myCallable = new MyCallable();  FutureTask task = new FutureTask(myCallable);  new Thread(task).start();  for (int i = 0; i \u0026lt; 100; i++) {  try {  Thread.sleep(100);  System.out.println(Thread.currentThread().getName()+\u0026#34;å¾ªç¯éå†içš„å€¼\u0026#34; + i);  }  catch (Exception e) {  e.printStackTrace();  }  }  } }  //lambdaæ–¹å¼ public class ThreadTest {  public static void main(String[] args) {  FutureTask\u0026lt;Integer\u0026gt; task = new FutureTask\u0026lt;\u0026gt;(()-\u0026gt;{  int i=0;  for(;i\u0026lt;100;i++){  System.out.println(Thread.currentThread().getName()+\u0026#34;å¾ªç¯å˜é‡içš„å€¼ï¼š\u0026#34;+i);  }  return i;  });  for(int i=0;i\u0026lt;100;i++){  System.out.println(Thread.currentThread().getName()+\u0026#34;å¾ªç¯å˜é‡içš„å€¼ï¼š\u0026#34;+i);  if(i==20){  new Thread(task,\u0026#34;æœ‰è¿”å›å€¼çš„çº¿ç¨‹\u0026#34;).start();  }  try{  System.out.println(\u0026#34;å­çº¿ç¨‹çš„è¿”å›å€¼ï¼š\u0026#34;+task.get());  }  catch (Exception e) {  e.printStackTrace();  }  }  } } å¼‚åŒç‚¹å’Œä¼˜ç¼ºç‚¹ å¼‚åŒç‚¹   ç›¸åŒç‚¹\n éƒ½å¯ä»¥å®ç°å¤šçº¿ç¨‹ Runnableä¸Callableå®ç°æ–¹å¼ç±»ä¼¼    ä¸åŒç‚¹\n Threadæ–¹å¼æ˜¯é€šè¿‡ç»§æ‰¿æ¥å®ç°ã€‚ Runnableä¸Callableæ˜¯é€šè¿‡å®ç°æ¥å£æ–¹å¼åˆ›å»ºçº¿ç¨‹ã€‚ Runnableä¸Callable  å› ä¸ºé€šè¿‡FutureTaskåŒ…è£…Callableæ¥å£ï¼ŒFutureTaskæœ‰getæ–¹æ³•å¯ä»¥è·å–è¿”å›å€¼ï¼Œæ‰€ä»¥åªæœ‰è¿™ç§æ–¹å¼åˆ›å»ºçš„å­çº¿ç¨‹æœ‰è¿”å›å€¼ã€‚ runæ–¹æ³•æ— æ³•æŠ›å‡ºå¼‚å¸¸ï¼Œcallæ–¹æ³•å¯ä»¥æŠ›å‡ºchecked exceptionã€‚ Callableå’ŒRunnableéƒ½å¯ä»¥åº”ç”¨äºexecutorsã€‚è€ŒThreadç±»åªæ”¯æŒRunnable.      ä¼˜ç¼ºç‚¹   ä¼˜ç‚¹\n  Thread\n ç¼–å†™ç®€å•ï¼Œå¦‚æœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™æ— é¡»ä½¿ç”¨Thread.currentThreadï¼ˆï¼‰æ–¹æ³•ï¼Œç›´æ¥ä½¿ç”¨thiså³å¯è·å¾—å½“å‰çº¿ç¨‹ã€‚    Runnableä¸Callable\n å¯ä»¥ç»§æ‰¿å…¶ä»–ç±» å¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«ä¸€ä¸ªtargetå¯¹è±¡ï¼Œæ‰€ä»¥éå¸¸é€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹æ¥å¤„ç†åŒä¸€ä»½èµ„æºçš„æƒ…å†µï¼Œä»è€Œå¯ä»¥å°†CPUã€ä»£ç å’Œæ•°æ®åˆ†å¼€ï¼Œå½¢æˆæ¸…æ™°çš„æ¨¡å‹ï¼Œè¾ƒå¥½åœ°ä½“ç°äº†é¢å‘å¯¹è±¡çš„æ€æƒ³ã€‚      ç¼ºç‚¹\n Thread  ç»§æ‰¿çš„å±€é™æ€§ï¼Œä¸èƒ½ç»§æ‰¿å…¶ä»–ç±»   Runnableä¸Callable  ç¼–ç¨‹ç¨ç¨å¤æ‚ï¼Œå¦‚æœéœ€è¦è®¿é—®å½“å‰çº¿ç¨‹ï¼Œåˆ™å¿…é¡»ä½¿ç”¨Thread.currentThreadï¼ˆï¼‰æ–¹æ³•ã€‚      è¡¥å…… æ‰©å……ï¼šåœ¨javaä¸­ï¼Œæ¯æ¬¡ç¨‹åºè¿è¡Œè‡³å°‘å¯åŠ¨2ä¸ªçº¿ç¨‹ã€‚ä¸€ä¸ªæ˜¯mainçº¿ç¨‹ï¼Œä¸€ä¸ªæ˜¯åƒåœ¾æ”¶é›†çº¿ç¨‹ã€‚å› ä¸ºæ¯å½“ä½¿ç”¨ javaå‘½ä»¤æ‰§è¡Œä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå®é™…ä¸Šéƒ½ä¼šå¯åŠ¨ä¸€ä¸ªJVMï¼Œæ¯ä¸€ä¸ªJVMå…¶å®åœ¨å°±æ˜¯åœ¨æ“ä½œç³»ç»Ÿä¸­å¯åŠ¨äº†ä¸€ä¸ªè¿› ç¨‹ã€‚\nå­çº¿ç¨‹æ‰§è¡Œå®Œï¼Œä¸»çº¿ç¨‹æ‰§è¡Œ æ­£å¸¸å¦‚1ä¸­çš„å„ç§å®ç°æ–¹å¼ Localè·³è½¬æ–¹å¼ï¼ŒShimoè·³è½¬æ–¹å¼ï¼Œä¸»çº¿ç¨‹ä¸å­çº¿ç¨‹æ˜¯äº‰å¤ºçº¿ç¨‹èµ„æºçš„ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µæ˜¯ä¼šå‡ºç°ç±»ä¼¼äº¤æ›¿æ‰§è¡Œçš„çŠ¶å†µã€‚\nFutureTaskæ¥åŒ…è£…Callableå¯¹è±¡ ä¸Šæ–¹ï¼ˆ Localè·³è½¬æ–¹å¼ï¼ŒShimoè·³è½¬æ–¹å¼ï¼‰çš„è¿™ç§æ˜¯å­çº¿ç¨‹æ— è¿”å›å€¼çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œå­çº¿ç¨‹ä¸å¤šçº¿ç¨‹å¯ä»¥äº‰å¤ºçº¿ç¨‹èµ„æºï¼Œ\nå¦‚æœä¸ºå­çº¿ç¨‹æ·»åŠ è¿”å›å€¼ï¼Œä½¿ç”¨ FutureTaskæ¥åŒ…è£…Callableå¯¹è±¡ï¼Œé€šè¿‡task.get()æ¥è·å–è¿”å›å€¼ï¼Œä¸»çº¿ç¨‹è¿›è¡Œåˆ°task.get()æ—¶ï¼Œå¦‚æœå­çº¿ç¨‹è¿˜åœ¨æ‰§è¡Œï¼Œæ²¡æœ‰è¿”å›ï¼Œä¸»çº¿ç¨‹å°±ä¼šå­çº¿ç¨‹è¿”å›ä¹‹å‰ç­‰å¾…æŒ‚èµ·ã€‚ä»è€Œè¾¾åˆ°è¦æ±‚ã€‚\npublic class TestCode3 { \tpublic static void main(String[] args) { \tFutureTask\u0026lt;Integer\u0026gt; task = new FutureTask\u0026lt;Integer\u0026gt;((Callable\u0026lt;Integer\u0026gt;)()-\u0026gt;{ \tint i=0; \tfor(;i\u0026lt;100;i++){ \tSystem.out.println(Thread.currentThread().getName()+\u0026#34;å¾ªç¯å˜é‡içš„å€¼ï¼š\u0026#34;+i); \t} \treturn i; \t}); \tfor(int i=0;i\u0026lt;100;i++){ \tSystem.out.println(Thread.currentThread().getName()+\u0026#34;å¾ªç¯å˜é‡içš„å€¼ï¼š\u0026#34;+i); \tif(i==20){ \tnew Thread(task,\u0026#34;æœ‰è¿”å›å€¼çš„çº¿ç¨‹\u0026#34;).start(); \t} \ttry{ \tSystem.out.println(\u0026#34;å­çº¿ç¨‹çš„è¿”å›å€¼ï¼š\u0026#34;+task.get()); \t} \tcatch (Exception e) { \te.printStackTrace(); \t} \t} \t} } joinæ–¹æ³• å‚è€ƒèµ„æ–™é“¾æ¥\nç»“è®ºï¼št.join()æ–¹æ³•åªä¼šä½¿ä¸»çº¿ç¨‹(æˆ–è€…è¯´è°ƒç”¨t.join()çš„çº¿ç¨‹)è¿›å…¥ç­‰å¾…æ± å¹¶ç­‰å¾…tçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åæ‰ä¼šè¢«å”¤é†’ã€‚å¹¶ä¸å½±å“åŒä¸€æ—¶åˆ»å¤„åœ¨è¿è¡ŒçŠ¶æ€çš„å…¶ä»–çº¿ç¨‹ã€‚\nt.joinæ–¹æ³•åº•å±‚ä¸­ä½¿ç”¨wait(0)æ–¹æ³•ï¼Œå³ä½¿ç”¨äº†è¯¥æ–¹æ³•çš„çº¿ç¨‹ä¼šè¿›å…¥æ— é™ç­‰å¾…ä¸­ï¼Œç›´åˆ° t æ‰§è¡Œå®Œæˆæ‰è¿”å›ã€‚è¿›å…¥ç­‰å¾…çš„åªæ˜¯è°ƒç”¨äº†joinæ–¹æ³•çš„çº¿ç¨‹ï¼Œå…¶ä»–çº¿ç¨‹æ²¡å¼€å¯çš„ä¸ä¼šå¼€å¯ï¼Œå¼€å¯äº†çš„ä¸ä¼šç­‰å¾…ç»§ç»­æ‰§è¡Œã€‚\npublic class TestJoin { \tpublic static void main(String[] args) throws InterruptedException { \t// TODO Auto-generated method stub \tSystem.out.println(Thread.currentThread().getName()+\u0026#34; start\u0026#34;); \tThreadTest t1=new ThreadTest(\u0026#34;A\u0026#34;); \tThreadTest t2=new ThreadTest(\u0026#34;B\u0026#34;); \tThreadTest t3=new ThreadTest(\u0026#34;C\u0026#34;); \tSystem.out.println(\u0026#34;t1start\u0026#34;); \tt1.start(); \tSystem.out.println(\u0026#34;t1end\u0026#34;); \tSystem.out.println(\u0026#34;t2start\u0026#34;); \tt2.start(); \tSystem.out.println(\u0026#34;t2end\u0026#34;); \tt1.join(); \tSystem.out.println(\u0026#34;t3start\u0026#34;); \tt3.start(); \tSystem.out.println(\u0026#34;t3end\u0026#34;); \tSystem.out.println(Thread.currentThread().getName()+\u0026#34; end\u0026#34;); \t} } ç»“æœï¼š\nmain start t1start t1end t2start t2end A-1 B-1 A-2 A-3 A-4 A-5 B-2 t3start t3end B-3 main end B-4 B-5 C-1 C-2 C-3 C-4 C-5 ä¸»çº¿ç¨‹åœ¨t1.join()æ–¹æ³•å¤„åœæ­¢ï¼Œå¹¶éœ€è¦ç­‰å¾…Açº¿ç¨‹æ‰§è¡Œå®Œæ¯•åæ‰ä¼šæ‰§è¡Œt3.start()ï¼Œç„¶è€Œï¼Œå¹¶ä¸å½±å“Bçº¿ç¨‹çš„æ‰§è¡Œã€‚å› æ­¤ï¼Œå¯ä»¥å¾—å‡ºç»“è®ºï¼Œt.join()æ–¹æ³•åªä¼šä½¿ä¸»çº¿ç¨‹è¿›å…¥ç­‰å¾…æ± å¹¶ç­‰å¾…tçº¿ç¨‹æ‰§è¡Œå®Œæ¯•åæ‰ä¼šè¢«å”¤é†’ã€‚å¹¶ä¸å½±å“åŒä¸€æ—¶åˆ»å¤„åœ¨è¿è¡ŒçŠ¶æ€çš„å…¶ä»–çº¿ç¨‹ã€‚\n joinæºç ä¸­ï¼Œåªä¼šè°ƒç”¨waitæ–¹æ³•ï¼Œå¹¶æ²¡æœ‰åœ¨ç»“æŸæ—¶è°ƒç”¨notifyï¼Œè¿™æ˜¯å› ä¸º==çº¿ç¨‹åœ¨dieçš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨è‡ªèº«çš„notifyAllæ–¹æ³•ï¼Œæ¥é‡Šæ”¾æ‰€æœ‰çš„èµ„æºå’Œé”ã€‚==\n çº¿ç¨‹ä¸çº¿ç¨‹æ± çš„çŠ¶æ€ çº¿ç¨‹çš„çŠ¶æ€ï¼ˆNRBWTTï¼‰ï¼ˆç‰›è‚‰åŒ…æˆ‘èˆ”èˆ”ï¼‰  NEW\tå°šæœªå¯åŠ¨ RUNNABLE æ­£åœ¨æ‰§â¾ä¸­ BLOCKED é˜»å¡çš„ï¼ˆè¢«åŒæ­¥é”æˆ–è€…IOé”é˜»å¡ï¼‰ WAITING æ°¸ä¹…ç­‰å¾…çŠ¶æ€ TIMED_WAITING ç­‰å¾…æŒ‡å®šçš„æ—¶é—´é‡æ–°è¢«å”¤é†’çš„çŠ¶æ€ TERMINATED æ‰§â¾å®Œæˆ  çº¿ç¨‹æ± çš„çŠ¶æ€ï¼ˆRSSTTï¼‰ï¼ˆäººäº‹æ˜¯å‚»ç”œç”œï¼‰   RUNNINGï¼š è¿™æ˜¯æœ€æ­£å¸¸çš„çŠ¶æ€ ï¼Œæ¥å—æ–°çš„ä»»åŠ¡ï¼Œå¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ ã€‚\n  SHUTDOWNï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä½†æ˜¯ä¼šç»§ç»­å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚\n  STOPï¼šä¸æ¥å—æ–°çš„ä»»åŠ¡æäº¤ï¼Œä¸å†å¤„ç†ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œä¸­æ–­æ­£åœ¨æ‰§â¾ä»»åŠ¡çš„çº¿ç¨‹ã€‚\n  TIDYINGï¼šæ‰€æœ‰çš„ä»»åŠ¡éƒ½é”€æ¯äº†ï¼ŒworkCount ä¸º 0ï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€åœ¨è½¬æ¢ä¸º TIDYING çŠ¶æ€æ—¶ï¼Œä¼šæ‰§â¾é’©â¼¦â½…æ³• terminated()ã€‚\n  TERMINATEDï¼šterminated()â½…æ³•ç»“æŸåï¼Œçº¿ç¨‹æ± çš„çŠ¶æ€å°±ä¼šå˜æˆè¿™ä¸ªã€‚\n  çº¿ç¨‹æ±  å¤§ä½¬é“¾æ¥====ã€‹çº¿ç¨‹æ± 1_CSDNåšå®¢\nå¤§ä½¬é“¾æ¥====ã€‹çº¿ç¨‹æ± 2-CSDNåšå®¢\nçº¿ç¨‹æ± çš„ä¼˜ç‚¹   é™ä½èµ„æºæ¶ˆè€—ã€‚é€šè¿‡é‡å¤åˆ©ç”¨å·²åˆ›å»ºçš„çº¿ç¨‹é™ä½çº¿ç¨‹åˆ›å»ºå’Œé”€æ¯é€ æˆçš„æ¶ˆè€—ã€‚\n  æé«˜å“åº”é€Ÿåº¦ã€‚å½“ä»»åŠ¡åˆ°è¾¾æ—¶ï¼Œä»»åŠ¡å¯ä»¥ä¸éœ€è¦ç­‰åˆ°çº¿ç¨‹åˆ›å»ºå°±èƒ½ç«‹å³æ‰§è¡Œã€‚\n  **æé«˜çº¿ç¨‹çš„å¯ç®¡ç†æ€§ã€‚**çº¿ç¨‹æ˜¯ç¨€ç¼ºèµ„æºï¼Œå¦‚æœæ— é™åˆ¶çš„åˆ›å»ºï¼Œä¸ä»…ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œè¿˜ä¼šé™ä½ç³»ç»Ÿçš„ç¨³å®šæ€§ï¼Œä½¿ç”¨çº¿ç¨‹æ± å¯ä»¥è¿›è¡Œç»Ÿä¸€çš„åˆ†é…ï¼Œè°ƒä¼˜å’Œç›‘æ§ã€‚\n  çº¿ç¨‹æ± çš„ç»§æ‰¿æ ‘ çº¿ç¨‹æ± åœ°ä½¿ç”¨ çº¿ç¨‹æ± çš„çœŸæ­£å®ç°ç±»æ˜¯ThreadPoolExecutor ï¼Œå…¶æ„é€ å™¨æ–¹æ³•æœ‰ä»¥ä¸‹4ç§ï¼š\npublic ThreadPoolExecutor(int corePoolSize,  int maximumPoolSize,  long keepAliveTime,  TimeUnit unit,  BlockingQueue\u0026lt;Runnable\u0026gt; workQueue) {  this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,  Executors.defaultThreadFactory(), defaultHandler); }  public ThreadPoolExecutor(int corePoolSize,  int maximumPoolSize,  long keepAliveTime,  TimeUnit unit,  BlockingQueue\u0026lt;Runnable\u0026gt; workQueue,  ThreadFactory threadFactory) {  this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,  threadFactory, defaultHandler); }  public ThreadPoolExecutor(int corePoolSize,  int maximumPoolSize,  long keepAliveTime,  TimeUnit unit,  BlockingQueue\u0026lt;Runnable\u0026gt; workQueue,  RejectedExecutionHandler handler) {  this(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue,  Executors.defaultThreadFactory(), handler); }  public ThreadPoolExecutor(int corePoolSize,  int maximumPoolSize,  long keepAliveTime,  TimeUnit unit,  BlockingQueue\u0026lt;Runnable\u0026gt; workQueue,  ThreadFactory threadFactory,  RejectedExecutionHandler handler) {  if (corePoolSize \u0026lt; 0 ||  maximumPoolSize \u0026lt;= 0 ||  maximumPoolSize \u0026lt; corePoolSize ||  keepAliveTime \u0026lt; 0)  throw new IllegalArgumentException();  if (workQueue == null || threadFactory == null || handler == null)  throw new NullPointerException();  this.corePoolSize = corePoolSize;  this.maximumPoolSize = maximumPoolSize;  this.workQueue = workQueue;  this.keepAliveTime = unit.toNanos(keepAliveTime);  this.threadFactory = threadFactory;  this.handler = handler; } å‚æ•°è¯´æ˜ï¼šIPHP  corePoolSizeï¼ˆå¿…éœ€ï¼‰ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¼šä¸€ç›´å­˜æ´»ï¼Œä½†æ˜¯å½“å°† allowCoreThreadTimeout è®¾ç½®ä¸º true æ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¹Ÿä¼šè¶…æ—¶å›æ”¶ã€‚ maximumPoolSizeï¼ˆå¿…éœ€ï¼‰ï¼šçº¿ç¨‹æ± æ‰€èƒ½å®¹çº³çš„æœ€å¤§çº¿ç¨‹æ•°ã€‚å½“æ´»è·ƒçº¿ç¨‹æ•°è¾¾åˆ°è¯¥æ•°å€¼åï¼Œåç»­çš„æ–°ä»»åŠ¡å°†ä¼šé˜»å¡ã€‚ keepAliveTimeï¼ˆå¿…éœ€ï¼‰ï¼šçº¿ç¨‹é—²ç½®è¶…æ—¶æ—¶é•¿ã€‚å¦‚æœè¶…è¿‡è¯¥æ—¶é•¿ï¼Œéæ ¸å¿ƒçº¿ç¨‹å°±ä¼šè¢«å›æ”¶ã€‚å¦‚æœå°† allowCoreThreadTimeout è®¾ç½®ä¸º true æ—¶ï¼Œæ ¸å¿ƒçº¿ç¨‹ä¹Ÿä¼šè¶…æ—¶å›æ”¶ã€‚ unitï¼ˆå¿…éœ€ï¼‰ï¼šæŒ‡å®š keepAliveTime å‚æ•°çš„æ—¶é—´å•ä½ã€‚å¸¸ç”¨çš„æœ‰ï¼šTimeUnit.MILLISECONDSï¼ˆæ¯«ç§’ï¼‰ã€TimeUnit.SECONDSï¼ˆç§’ï¼‰ã€TimeUnit.MINUTESï¼ˆåˆ†ï¼‰ã€‚ workQueueï¼ˆå¿…éœ€ï¼‰ï¼šä»»åŠ¡é˜Ÿåˆ—ã€‚é€šè¿‡çº¿ç¨‹æ± çš„ execute() æ–¹æ³•æäº¤çš„ Runnable å¯¹è±¡å°†å­˜å‚¨åœ¨è¯¥å‚æ•°ä¸­ã€‚å…¶é‡‡ç”¨é˜»å¡é˜Ÿåˆ—å®ç°ã€‚ threadFactoryï¼ˆå¯é€‰ï¼‰ï¼šçº¿ç¨‹å·¥å‚ã€‚ç”¨äºæŒ‡å®šä¸ºçº¿ç¨‹æ± åˆ›å»ºæ–°çº¿ç¨‹çš„æ–¹å¼ã€‚ handlerï¼ˆå¯é€‰ï¼‰ï¼šæ‹’ç»ç­–ç•¥ã€‚å½“è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°æ—¶éœ€è¦æ‰§è¡Œçš„é¥±å’Œç­–ç•¥ã€‚  çº¿ç¨‹æ± çš„ä½¿ç”¨æµç¨‹ï¼š\n// åˆ›å»ºçº¿ç¨‹æ±  ThreadPoolExecutor threadPool = new ThreadPoolExecutor(CORE_POOL_SIZE,  MAXIMUM_POOL_SIZE,  KEEP_ALIVE,  TimeUnit.SECONDS,  sPoolWorkQueue,  sThreadFactory); // å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ threadPool.execute(new Runnable() {  @Override  public void run() {  ... // çº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡  } }); // å…³é—­çº¿ç¨‹æ±  threadPool.shutdown(); // è®¾ç½®çº¿ç¨‹æ± çš„çŠ¶æ€ä¸ºSHUTDOWNï¼Œç„¶åä¸­æ–­æ‰€æœ‰æ²¡æœ‰æ­£åœ¨æ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ threadPool.shutdownNow(); // è®¾ç½®çº¿ç¨‹æ± çš„çŠ¶æ€ä¸º STOPï¼Œç„¶åå°è¯•åœæ­¢æ‰€æœ‰çš„æ­£åœ¨æ‰§è¡Œæˆ–æš‚åœä»»åŠ¡çš„çº¿ç¨‹ï¼Œå¹¶è¿”å›ç­‰å¾…æ‰§è¡Œä»»åŠ¡çš„åˆ—è¡¨ çº¿ç¨‹æ± çš„å·¥ä½œåŸç† ç®€æ¦‚ï¼šIPHP  1.å¦‚æœçº¿ç¨‹æ•°å°äºcorePoolSizeï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ ¸å¿ƒçº¿ç¨‹æ¥è¿è¡Œæ–°ä»»åŠ¡ã€‚ 2.å¦‚æœçº¿ç¨‹æ•°å¤§äºç­‰äºcorePoolSizeä½†å°äºmaximumPoolSizeï¼Œåˆ™å°†ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ã€‚ 3.å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œå¹¶ä¸”çº¿ç¨‹æ•°å°äºmaxPoolSizeï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°éæ ¸å¿ƒçº¿ç¨‹æ¥è¿è¡Œä»»åŠ¡ã€‚ 4.å¦‚æœé˜Ÿåˆ—å·²æ»¡ï¼Œå¹¶ä¸”çº¿ç¨‹æ•°å¤§äºæˆ–ç­‰äºmaxPoolSizeï¼Œåˆ™æ‹’ç»è¯¥ä»»åŠ¡ã€‚  æ˜¯å¦éœ€è¦å¢åŠ çº¿ç¨‹çš„åˆ¤æ–­é¡ºåºæ˜¯ï¼š1ã€corePoolSize 2ã€workQueue 3ã€maxPoolSize\nä¸¾ä¸ªä¾‹å­ï¼š\nçº¿ç¨‹æ± çš„æ ¸å¿ƒçº¿ç¨‹æ•°corePoolSizeå¤§å°ä¸º5ï¼Œæœ€å¤§æ± maxPoolSizeå¤§å°ä¸º10ï¼Œé˜Ÿåˆ—workQueueä¸º100ã€‚\nå› ä¸ºçº¿ç¨‹ä¸­çš„è¯·æ±‚æœ€å¤šä¼šåˆ›å»º5ä¸ªï¼Œç„¶åä»»åŠ¡å°†è¢«æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼Œç›´åˆ°è¾¾åˆ°100ã€‚å½“é˜Ÿåˆ—å·²æ»¡æ—¶ï¼Œå°†åˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œæœ€å¤šåˆ°10ä¸ªçº¿ç¨‹ï¼Œå¦‚æœå†æ¥ä»»åŠ¡ï¼Œå°±æ‹’ç»ã€‚\nç‰¹ç‚¹ï¼š\n é€šè¿‡è®¾ç½®corePoolSizeå’ŒmaximumPoolSize ç›¸åŒï¼Œå°±å¯ä»¥åˆ›å»ºå›ºå®šå¤§å°çš„çº¿ç¨‹æ± ã€‚ æˆ‘ä»¬ä½¿ç”¨çº¿ç¨‹æ± ä¸€èˆ¬å¸Œæœ›ä¿æŒè¾ƒå°‘çš„çº¿ç¨‹æ•°ï¼Œå¹¶ä¸”åªæœ‰åœ¨è´Ÿè½½å˜å¾—å¾ˆå¤§æ—¶æ‰å¢åŠ å®ƒã€‚ é€šè¿‡è®¾ç½®maximumPoolSizeä¸ºå¾ˆé«˜çš„å€¼ï¼Œä¾‹å¦‚ Integer.MAX_VALUEï¼Œå¯ä»¥å…è®¸çº¿ç¨‹æ± å®¹çº³ä»»æ„æ•°é‡çš„å¹¶å‘ä»»åŠ¡ã€‚ åªæœ‰åœ¨é˜Ÿåˆ—å¡«æ»¡æ—¶æ‰åˆ›å»ºå¤šäºcorePoolSizeçš„éæ ¸å¿ƒçº¿ç¨‹ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯æ— ç•Œé˜Ÿåˆ—ï¼ˆä¾‹å¦‚LinkedBlockingQueueï¼‰ï¼Œé‚£ä¹ˆçº¿ç¨‹æ•°å°±ä¸ä¼šè¶…è¿‡corePoolSizeã€‚  çº¿ç¨‹å‚æ•°è§£æ ä»»åŠ¡é˜Ÿåˆ—workQueue ä»»åŠ¡é˜Ÿåˆ—æ˜¯åŸºäºé˜»å¡é˜Ÿåˆ—å®ç°çš„ï¼Œå³é‡‡ç”¨ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å¼ï¼Œåœ¨ Java ä¸­éœ€è¦å®ç° BlockingQueue æ¥å£ã€‚ä½† Java å·²ç»ä¸ºæˆ‘ä»¬æä¾›äº† 7 ç§é˜»å¡é˜Ÿåˆ—çš„å®ç°ï¼š\n  ArrayBlockingQueueï¼šä¸€ä¸ªç”±æ•°ç»„ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼ˆæ•°ç»„ç»“æ„å¯é…åˆæŒ‡é’ˆå®ç°ä¸€ä¸ªç¯å½¢é˜Ÿåˆ—ï¼‰ã€‚\n  LinkedBlockingQueueï¼š ä¸€ä¸ªç”±é“¾è¡¨ç»“æ„ç»„æˆçš„æœ‰ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œåœ¨æœªæŒ‡æ˜å®¹é‡æ—¶ï¼Œå®¹é‡é»˜è®¤ä¸ºInteger.MAX_VALUEã€‚\n è¿™ç§é˜Ÿåˆ—å®¹é‡æ— é™å¤§ï¼Œå¯ä»¥é˜²æ­¢æµé‡çªå¢ã€‚è®¾ç½®maximumPoolSizeä¹Ÿç”¨ä¸åˆ°ï¼Œå› ä¸ºé˜Ÿåˆ—è£…ä¸æ»¡ï¼Œæ°¸è¿œä¸éœ€è¦åˆ›å»ºæ–°çš„éæ ¸å¿ƒçº¿ç¨‹ã€‚ä½†æ˜¯ä¹Ÿæœ‰é£é™©ï¼Œå¤„ç†ä»»åŠ¡çš„é€Ÿåº¦è·Ÿä¸ä¸Šæäº¤çš„é€Ÿåº¦ï¼Œå¯èƒ½é€ æˆå†…å­˜æµªè´¹æˆ–è€…OOMã€‚\n   PriorityBlockingQueueï¼š ä¸€ä¸ªæ”¯æŒä¼˜å…ˆçº§æ’åºçš„æ— ç•Œé˜»å¡é˜Ÿåˆ—ï¼Œå¯¹å…ƒç´ æ²¡æœ‰è¦æ±‚ï¼Œå¯ä»¥å®ç° Comparable æ¥å£ä¹Ÿå¯ä»¥æä¾› Comparator æ¥å¯¹é˜Ÿåˆ—ä¸­çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚è·Ÿæ—¶é—´æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œä»…ä»…æ˜¯æŒ‰ç…§ä¼˜å…ˆçº§å–ä»»åŠ¡ã€‚\n  DelayQueueï¼šç±»ä¼¼äºPriorityBlockingQueueï¼Œæ˜¯äºŒå‰å †å®ç°çš„æ— ç•Œä¼˜å…ˆçº§é˜»å¡é˜Ÿåˆ—ã€‚è¦æ±‚å…ƒç´ éƒ½å®ç° Delayed æ¥å£ï¼Œé€šè¿‡æ‰§è¡Œæ—¶å»¶ä»é˜Ÿåˆ—ä¸­æå–ä»»åŠ¡ï¼Œæ—¶é—´æ²¡åˆ°ä»»åŠ¡å–ä¸å‡ºæ¥ã€‚\n  SynchronousQueueï¼š ä¸€ä¸ªä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹è°ƒç”¨ take() æ–¹æ³•çš„æ—¶å€™å°±ä¼šå‘ç”Ÿé˜»å¡ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªç”Ÿäº§è€…çº¿ç¨‹ç”Ÿäº§äº†ä¸€ä¸ªå…ƒç´ ï¼Œæ¶ˆè´¹è€…çº¿ç¨‹å°±å¯ä»¥æ‹¿åˆ°è¿™ä¸ªå…ƒç´ å¹¶è¿”å›ï¼›ç”Ÿäº§è€…çº¿ç¨‹è°ƒç”¨ put() æ–¹æ³•çš„æ—¶å€™ä¹Ÿä¼šå‘ç”Ÿé˜»å¡ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹æ¶ˆè´¹äº†ä¸€ä¸ªå…ƒç´ ï¼Œç”Ÿäº§è€…æ‰ä¼šè¿”å›ã€‚\n å·¥ä½œä»»åŠ¡ä¸å¤šçš„æƒ…å†µä¸‹ï¼Œåªæ˜¯å°†ä»»åŠ¡ä¸­è½¬ï¼Œå°±å¯ä»¥ç”¨SynchronousQueueï¼Œè¿™ä¸ªé˜Ÿåˆ—æœ¬èº«å†…éƒ¨æ²¡æœ‰å®¹é‡ï¼Œä½¿ç”¨è¿™ç§é˜Ÿåˆ—ï¼ŒmaximumPoolSizeå°±å¯èƒ½éœ€è¦è®¾ç½®çš„å¤§ä¸€äº›ã€‚å› ä¸ºæ²¡æœ‰é˜Ÿåˆ—å®¹é‡ä½œä¸ºç¼“å†²äº†ï¼Œå¾ˆå®¹æ˜“åˆ›å»ºæ–°çº¿ç¨‹ã€‚\n   LinkedBlockingDequeï¼š ä½¿ç”¨åŒå‘é˜Ÿåˆ—å®ç°çš„æœ‰ç•ŒåŒç«¯é˜»å¡é˜Ÿåˆ—ã€‚åŒç«¯æ„å‘³ç€å¯ä»¥åƒæ™®é€šé˜Ÿåˆ—ä¸€æ · FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ï¼Œä¹Ÿå¯ä»¥åƒæ ˆä¸€æ · FILOï¼ˆå…ˆè¿›åå‡ºï¼‰ã€‚\n  LinkedTransferQueueï¼š å®ƒæ˜¯ConcurrentLinkedQueueã€LinkedBlockingQueue å’Œ SynchronousQueue çš„ç»“åˆä½“ï¼Œä½†æ˜¯æŠŠå®ƒç”¨åœ¨ ThreadPoolExecutor ä¸­ï¼Œå’Œ LinkedBlockingQueue è¡Œä¸ºä¸€è‡´ï¼Œä½†æ˜¯æ˜¯æ— ç•Œçš„é˜»å¡é˜Ÿåˆ—ã€‚\n  æ³¨æ„æœ‰ç•Œé˜Ÿåˆ—å’Œæ— ç•Œé˜Ÿåˆ—çš„åŒºåˆ«ï¼šå¦‚æœä½¿ç”¨æœ‰ç•Œé˜Ÿåˆ—ï¼Œå½“é˜Ÿåˆ—é¥±å’Œæ—¶å¹¶è¶…è¿‡æœ€å¤§çº¿ç¨‹æ•°æ—¶å°±ä¼šæ‰§è¡Œæ‹’ç»ç­–ç•¥ï¼›è€Œå¦‚æœä½¿ç”¨æ— ç•Œé˜Ÿåˆ—ï¼Œå› ä¸ºä»»åŠ¡é˜Ÿåˆ—æ°¸è¿œéƒ½å¯ä»¥æ·»åŠ ä»»åŠ¡ï¼Œæ‰€ä»¥è®¾ç½® maximumPoolSize æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚\nçº¿ç¨‹å·¥å‚ï¼ˆthreadFactoryï¼‰ çº¿ç¨‹å·¥å‚æŒ‡å®šåˆ›å»ºçº¿ç¨‹çš„æ–¹å¼ï¼Œéœ€è¦å®ç° ThreadFactory æ¥å£ï¼Œå¹¶å®ç° newThread(Runnable r) æ–¹æ³•ã€‚\n æ–°çš„çº¿ç¨‹æ˜¯ç”±ThreadFactoryåˆ›å»ºçš„ï¼Œé»˜è®¤ä½¿ç”¨Executors.defaultThreadFactory() åˆ›å»ºå‡ºæ¥çš„çº¿ç¨‹éƒ½åœ¨åŒä¸€ä¸ªçº¿ç¨‹ç»„ï¼Œæ‹¥æœ‰åŒæ ·çš„NORM_PRIORITYä¼˜å…ˆçº§å¹¶ä¸”éƒ½ä¸æ˜¯å®ˆæŠ¤çº¿ç¨‹ã€‚ å¦‚æœè‡ªå·±æŒ‡å®šThreadFactoryï¼Œé‚£ä¹ˆå°±å¯ä»¥æ”¹å˜çº¿ç¨‹åã€çº¿ç¨‹ç»„ã€ä¼˜å…ˆçº§ã€æ˜¯å¦æ˜¯å®ˆæŠ¤çº¿ç¨‹ç­‰ã€‚ é€šå¸¸ä½¿ç”¨é»˜è®¤çš„ThreadFactoryå°±å¯ä»¥äº†  // éªŒè¯ç¬¬ä¸€ç‚¹ï¼Œæ–°çš„çº¿ç¨‹æ˜¯ç”±ThreadFactoryåˆ›å»ºçš„ï¼Œé»˜è®¤ä½¿ç”¨Executors.defaultThreadFactory() public static ThreadFactory defaultThreadFactory() {  return new DefaultThreadFactory(); }  ......  static class DefaultThreadFactory implements ThreadFactory {  private static final AtomicInteger poolNumber = new AtomicInteger(1);  private final ThreadGroup group;  private final AtomicInteger threadNumber = new AtomicInteger(1);  private final String namePrefix;   DefaultThreadFactory() {  SecurityManager s = System.getSecurityManager();  group = (s != null) ? s.getThreadGroup() :  Thread.currentThread().getThreadGroup();  namePrefix = \u0026#34;pool-\u0026#34; +  poolNumber.getAndIncrement() +  \u0026#34;-thread-\u0026#34;;  }   public Thread newThread(Runnable r) {  // éªŒè¯ç¬¬äºŒç‚¹ï¼Œåˆ›å»ºå‡ºæ¥çš„çº¿ç¨‹éƒ½åœ¨åŒä¸€ä¸ªçº¿ç¨‹ç»„ï¼Œæ‹¥æœ‰åŒæ ·çš„NORM_PRIORITYä¼˜å…ˆçº§å¹¶ä¸”éƒ½ä¸æ˜¯å®ˆæŠ¤çº¿ç¨‹ã€‚  Thread t = new Thread(group, r,  namePrefix + threadNumber.getAndIncrement(),  0);  if (t.isDaemon())  t.setDaemon(false);  if (t.getPriority() != Thread.NORM_PRIORITY)  t.setPriority(Thread.NORM_PRIORITY);  return t;  }  } æ‹’ç»ç­–ç•¥ï¼ˆhandlerï¼‰ å½“çº¿ç¨‹æ± çš„çº¿ç¨‹æ•°è¾¾åˆ°æœ€å¤§çº¿ç¨‹æ•°æ—¶ï¼Œéœ€è¦æ‰§è¡Œæ‹’ç»ç­–ç•¥ã€‚æ‹’ç»ç­–ç•¥éœ€è¦å®ç° RejectedExecutionHandler æ¥å£ï¼Œå¹¶å®ç° rejectedExecution(Runnable r, ThreadPoolExecutor executor) æ–¹æ³•ã€‚ä¸è¿‡ Executors æ¡†æ¶å·²ç»ä¸ºæˆ‘ä»¬å®ç°äº† 4 ç§æ‹’ç»ç­–ç•¥ï¼š\n AbortPolicyï¼ˆé»˜è®¤ï¼‰ï¼šä¸¢å¼ƒä»»åŠ¡å¹¶æŠ›å‡º RejectedExecutionException å¼‚å¸¸ã€‚ CallerRunsPolicyï¼šç”±è°ƒç”¨çº¿ç¨‹å¤„ç†è¯¥ä»»åŠ¡ã€‚ DiscardPolicyï¼šä¸¢å¼ƒä»»åŠ¡ï¼Œä½†æ˜¯ä¸æŠ›å‡ºå¼‚å¸¸ã€‚å¯ä»¥é…åˆè¿™ç§æ¨¡å¼è¿›è¡Œè‡ªå®šä¹‰çš„å¤„ç†æ–¹å¼ã€‚ DiscardOldestPolicyï¼šä¸¢å¼ƒé˜Ÿåˆ—æœ€æ—©çš„æœªå¤„ç†ä»»åŠ¡ï¼Œç„¶åé‡æ–°å°è¯•æ‰§è¡Œä»»åŠ¡ã€‚  åŠŸèƒ½çº¿ç¨‹æ±  å«Œä¸Šé¢ä½¿ç”¨çº¿ç¨‹æ± çš„æ–¹æ³•å¤ªéº»çƒ¦ï¼Ÿå…¶å®Executorså·²ç»ä¸ºæˆ‘ä»¬å°è£…å¥½äº† 4 ç§å¸¸è§çš„åŠŸèƒ½çº¿ç¨‹æ± ï¼Œå¦‚ä¸‹ï¼š\n å®šé•¿çº¿ç¨‹æ± ï¼ˆFixedThreadPoolï¼‰ å®šæ—¶çº¿ç¨‹æ± ï¼ˆScheduledThreadPool ï¼‰ å¯ç¼“å­˜çº¿ç¨‹æ± ï¼ˆCachedThreadPoolï¼‰ å•çº¿ç¨‹åŒ–çº¿ç¨‹æ± ï¼ˆSingleThreadExecutorï¼‰  å®šé•¿çº¿ç¨‹æ± ï¼ˆFixedThreadPoolï¼‰ public static ExecutorService newFixedThreadPool(int nThreads) {  return new ThreadPoolExecutor(nThreads, nThreads,  0L, TimeUnit.MILLISECONDS,  new LinkedBlockingQueue\u0026lt;Runnable\u0026gt;()); } public static ExecutorService newFixedThreadPool(int nThreads, ThreadFactory threadFactory) {  return new ThreadPoolExecutor(nThreads, nThreads,  0L, TimeUnit.MILLISECONDS,  new LinkedBlockingQueue\u0026lt;Runnable\u0026gt;(),  threadFactory); }  ç‰¹ç‚¹ï¼šåªæœ‰æ ¸å¿ƒçº¿ç¨‹ï¼Œçº¿ç¨‹æ•°é‡å›ºå®šï¼Œæ‰§è¡Œå®Œç«‹å³å›æ”¶ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸ºé“¾è¡¨ç»“æ„çš„æœ‰ç•Œé˜Ÿåˆ—ã€‚ åº”ç”¨åœºæ™¯ï¼šæ§åˆ¶çº¿ç¨‹æœ€å¤§å¹¶å‘æ•°ã€‚  ä½¿ç”¨ï¼š\n// 1. åˆ›å»ºå®šé•¿çº¿ç¨‹æ± å¯¹è±¡ \u0026amp; è®¾ç½®çº¿ç¨‹æ± çº¿ç¨‹æ•°é‡å›ºå®šä¸º3 ExecutorService fixedThreadPool = Executors.newFixedThreadPool(3); // 2. åˆ›å»ºå¥½Runnableç±»çº¿ç¨‹å¯¹è±¡ \u0026amp; éœ€æ‰§è¡Œçš„ä»»åŠ¡ Runnable task =new Runnable(){  public void run() {  System.out.println(\u0026#34;æ‰§è¡Œä»»åŠ¡å•¦\u0026#34;);  } }; // 3. å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ fixedThreadPool.execute(task); å®šæ—¶çº¿ç¨‹æ± ï¼ˆScheduledThreadPool ï¼‰  private static final long DEFAULT_KEEPALIVE_MILLIS = 10L;  public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize) {  return new ScheduledThreadPoolExecutor(corePoolSize); } public ScheduledThreadPoolExecutor(int corePoolSize) {  super(corePoolSize, Integer.MAX_VALUE,  DEFAULT_KEEPALIVE_MILLIS, MILLISECONDS,  new DelayedWorkQueue()); }  public static ScheduledExecutorService newScheduledThreadPool(  int corePoolSize, ThreadFactory threadFactory) {  return new ScheduledThreadPoolExecutor(corePoolSize, threadFactory); } public ScheduledThreadPoolExecutor(int corePoolSize,  ThreadFactory threadFactory) {  super(corePoolSize, Integer.MAX_VALUE,  DEFAULT_KEEPALIVE_MILLIS, MILLISECONDS,  new DelayedWorkQueue(), threadFactory); }  ç‰¹ç‚¹ï¼šæ ¸å¿ƒçº¿ç¨‹æ•°é‡å›ºå®šï¼Œéæ ¸å¿ƒçº¿ç¨‹æ•°é‡æ— é™ï¼Œæ‰§è¡Œå®Œé—²ç½® 10ms åå›æ”¶ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸ºå»¶æ—¶é˜»å¡é˜Ÿåˆ—ã€‚ åº”ç”¨åœºæ™¯ï¼šæ‰§è¡Œå®šæ—¶æˆ–å‘¨æœŸæ€§çš„ä»»åŠ¡ã€‚  // 1. åˆ›å»º å®šæ—¶çº¿ç¨‹æ± å¯¹è±¡ \u0026amp; è®¾ç½®çº¿ç¨‹æ± çº¿ç¨‹æ•°é‡å›ºå®šä¸º5 ScheduledExecutorService scheduledThreadPool = Executors.newScheduledThreadPool(5); // 2. åˆ›å»ºå¥½Runnableç±»çº¿ç¨‹å¯¹è±¡ \u0026amp; éœ€æ‰§è¡Œçš„ä»»åŠ¡ Runnable task =new Runnable(){  public void run() {  System.out.println(\u0026#34;æ‰§è¡Œä»»åŠ¡å•¦\u0026#34;);  } }; // 3. å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ scheduledThreadPool.schedule(task, 1, TimeUnit.SECONDS); // å»¶è¿Ÿ1såæ‰§è¡Œä»»åŠ¡ scheduledThreadPool.scheduleAtFixedRate(task,10,1000,TimeUnit.MILLISECONDS);// å»¶è¿Ÿ10msåã€æ¯éš”1000msæ‰§è¡Œä»»åŠ¡ å¯ç¼“å­˜çº¿ç¨‹æ± ï¼ˆCachedThreadPoolï¼‰  public static ExecutorService newCachedThreadPool() {  return new ThreadPoolExecutor(0, Integer.MAX_VALUE,  60L, TimeUnit.SECONDS,  new SynchronousQueue\u0026lt;Runnable\u0026gt;()); } public static ExecutorService newCachedThreadPool(ThreadFactory threadFactory) {  return new ThreadPoolExecutor(0, Integer.MAX_VALUE,  60L, TimeUnit.SECONDS,  new SynchronousQueue\u0026lt;Runnable\u0026gt;(),  threadFactory); }  ç‰¹ç‚¹ï¼šæ— æ ¸å¿ƒçº¿ç¨‹ï¼Œéæ ¸å¿ƒçº¿ç¨‹æ•°é‡æ— é™ï¼Œæ‰§è¡Œå®Œé—²ç½® 60s åå›æ”¶ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸ºä¸å­˜å‚¨å…ƒç´ çš„é˜»å¡é˜Ÿåˆ—ã€‚ åº”ç”¨åœºæ™¯ï¼šæ‰§è¡Œå¤§é‡ã€è€—æ—¶å°‘çš„ä»»åŠ¡ã€‚  // 1. åˆ›å»ºå¯ç¼“å­˜çº¿ç¨‹æ± å¯¹è±¡ ExecutorService cachedThreadPool = Executors.newCachedThreadPool(); // 2. åˆ›å»ºå¥½Runnableç±»çº¿ç¨‹å¯¹è±¡ \u0026amp; éœ€æ‰§è¡Œçš„ä»»åŠ¡ Runnable task =new Runnable(){  public void run() {  System.out.println(\u0026#34;æ‰§è¡Œä»»åŠ¡å•¦\u0026#34;);  } }; // 3. å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ cachedThreadPool.execute(task) å•çº¿ç¨‹åŒ–çº¿ç¨‹æ± ï¼ˆSingleThreadExecutorï¼‰ public static ExecutorService newSingleThreadExecutor() {  return new FinalizableDelegatedExecutorService  (new ThreadPoolExecutor(1, 1,  0L, TimeUnit.MILLISECONDS,  new LinkedBlockingQueue\u0026lt;Runnable\u0026gt;())); } public static ExecutorService newSingleThreadExecutor(ThreadFactory threadFactory) {  return new FinalizableDelegatedExecutorService  (new ThreadPoolExecutor(1, 1,  0L, TimeUnit.MILLISECONDS,  new LinkedBlockingQueue\u0026lt;Runnable\u0026gt;(),  threadFactory)); }  ç‰¹ç‚¹ï¼šåªæœ‰ 1 ä¸ªæ ¸å¿ƒçº¿ç¨‹ï¼Œæ— éæ ¸å¿ƒçº¿ç¨‹ï¼Œæ‰§è¡Œå®Œç«‹å³å›æ”¶ï¼Œä»»åŠ¡é˜Ÿåˆ—ä¸ºé“¾è¡¨ç»“æ„çš„æœ‰ç•Œé˜Ÿåˆ—ã€‚ åº”ç”¨åœºæ™¯ï¼šä¸é€‚åˆå¹¶å‘ä½†å¯èƒ½å¼•èµ· IO é˜»å¡æ€§åŠå½±å“ UI çº¿ç¨‹å“åº”çš„æ“ä½œï¼Œå¦‚æ•°æ®åº“æ“ä½œã€æ–‡ä»¶æ“ä½œç­‰ã€‚  // 1. åˆ›å»ºå•çº¿ç¨‹åŒ–çº¿ç¨‹æ±  ExecutorService singleThreadExecutor = Executors.newSingleThreadExecutor(); // 2. åˆ›å»ºå¥½Runnableç±»çº¿ç¨‹å¯¹è±¡ \u0026amp; éœ€æ‰§è¡Œçš„ä»»åŠ¡ Runnable task =new Runnable(){  public void run() {  System.out.println(\u0026#34;æ‰§è¡Œä»»åŠ¡å•¦\u0026#34;);  } }; // 3. å‘çº¿ç¨‹æ± æäº¤ä»»åŠ¡ singleThreadExecutor.execute(task); å¯¹æ¯” çº¿ç¨‹æ± æ¨¡æ¿ å¤§ä½¬é“¾æ¥====ã€‹Springçº¿ç¨‹æ± é…ç½®æ¨¡æ¿- åšå®¢å›­ \n@EnableAsync @Configuration public class LogThreadPoolConfig {   @Bean(name = \u0026#34;logThreadPool\u0026#34;)  public ThreadPoolTaskExecutor LogThreadPoolTask() {  ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();  LogThreadPoolProperties properties = this.logThreadPoolProperties();   executor.setCorePoolSize(properties.getCorePoolSize());  executor.setMaxPoolSize(properties.getMaxPoolSize());  executor.setQueueCapacity(properties.getQueueCapacity());  executor.setKeepAliveSeconds(properties.getKeepAliveSeconds());  executor.setThreadNamePrefix(properties.getThreadName());  switch (properties.getRejectedExecutionHandler()) {  case \u0026#34;abortPolicy\u0026#34;:  executor.setRejectedExecutionHandler(new AbortPolicy());  break;  case \u0026#34;callerRunsPolicy\u0026#34;:  executor.setRejectedExecutionHandler(new CallerRunsPolicy());  break;  case \u0026#34;discardOldestPolicy\u0026#34;:  executor.setRejectedExecutionHandler(new DiscardOldestPolicy());  break;  case \u0026#34;discardPolicy\u0026#34;:  executor.setRejectedExecutionHandler(new DiscardOldestPolicy());  break;  default:  executor.setRejectedExecutionHandler(new CallerRunsPolicy());  break;  }  executor.initialize();  return executor;  }    @Bean  @ConfigurationProperties(prefix = \u0026#34;threadpool.log\u0026#34;)  public LogThreadPoolProperties logThreadPoolProperties() {  return new LogThreadPoolProperties();  }    //@Getter lombokæä¾›çš„getsetæ–¹æ³•ç”Ÿæˆæ³¨è§£  //@Setter  @Configuration  public static class LogThreadPoolProperties {   /** * çº¿ç¨‹å‰ç¼€å */  private String threadName;  /** * æ ¸å¿ƒçº¿ç¨‹æ± å¤§å° */  private int corePoolSize;  /** * æœ€å¤§çº¿ç¨‹æ•° */  private int maxPoolSize;  /** * é˜Ÿåˆ—å¤§å° */  private int queueCapacity;  /** * çº¿ç¨‹æ± ç»´æŠ¤ç©ºé—²çº¿ç¨‹å­˜åœ¨æ—¶é—´ */  private int keepAliveSeconds;  /** * æ‹’ç»ç­–ç•¥ */  private String rejectedExecutionHandler;   } } è¿™æ ·å°±å¯ä»¥åœ¨ymlæ–‡ä»¶ä¸­é…ç½®å‚æ•°äº†ï¼š\nthreadpool:  log:  threadName: ThreadPool-log- # çº¿ç¨‹æ± å‰ç¼€å  corePoolSize: 8 # æ ¸å¿ƒçº¿ç¨‹æ± æ•°ï¼šIOå‹æ¨èè®¾ç½®ä¸ºcpuæ ¸å¿ƒæ•°*2ï¼›cpuå‹æ¨èè®¾ç½®ä¸ºcpuæ•°+1  maxPoolSize: 16 # æœ€å¤§çº¿ç¨‹æ± æ•°  queueCapacity: 1000 # çº¿ç¨‹æ± é˜»å¡é˜Ÿåˆ—å®¹é‡  keepAliveSeconds: 60 # å…è®¸çº¿ç¨‹ç©ºé—²æ—¶é—´  # æ‹’ç»ç­–ç•¥ abortPolicy callerRunsPolicy discardOldestPolicy discardPolicy  rejectedExecutionHandler: callerRunsPolicy ä½¿ç”¨ï¼š\nSpringæä¾›äº†æ³¨è§£æ–¹å¼æ¥æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨çº¿ç¨‹æ± ï¼Œåªéœ€è¦åœ¨è¦å¼‚æ­¥å¤„ç†çš„æ–¹æ³•ä¸ŠåŠ  @Async(\u0026ldquo;ä½ é…ç½®çš„çº¿ç¨‹æ± åå­—\u0026rdquo;)å°±å¯ä»¥äº†,æ³¨æ„è¿™ä¸ªç±»éœ€è¦è¢«springæ‰«æå¹¶çº³å…¥ç®¡ç†ï¼Œæ‰€ä»¥è¦åŠ @Serviceã€@Componentç­‰æ³¨è§£ã€‚\n@Service public class ServiceImpl implements Service {   @Override  @Async(\u0026#34;logThreadPool\u0026#34;)  public void addOperationLog(BaseLog baseLog) {  //ä½ è¦å¼‚æ­¥æ‰§è¡Œçš„é€»è¾‘  } } å°æ€»ç»“  ==Executors çš„ 4 ä¸ªåŠŸèƒ½çº¿ç¨‹æ± è™½ç„¶æ–¹ä¾¿ï¼Œä½†ç°åœ¨å·²ç»ä¸å»ºè®®ä½¿ç”¨äº†ï¼Œè€Œæ˜¯å»ºè®®ç›´æ¥é€šè¿‡ä½¿ç”¨ ThreadPoolExecutor çš„æ–¹å¼ï¼Œè¿™æ ·çš„å¤„ç†æ–¹å¼è®©å†™çš„åŒå­¦æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œè§„é¿èµ„æºè€—å°½çš„é£é™©ã€‚==  å…¶å® Executors çš„ 4 ä¸ªåŠŸèƒ½çº¿ç¨‹æœ‰å¦‚ä¸‹å¼Šç«¯ï¼š\n FixedThreadPool å’Œ SingleThreadExecutorï¼šä¸»è¦é—®é¢˜æ˜¯å †ç§¯çš„è¯·æ±‚å¤„ç†é˜Ÿåˆ—å‡é‡‡ç”¨ LinkedBlockingQueueï¼Œå¯èƒ½ä¼šè€—è´¹éå¸¸å¤§çš„å†…å­˜ï¼Œç”šè‡³ OOMã€‚ CachedThreadPool å’Œ ScheduledThreadPoolï¼šä¸»è¦é—®é¢˜æ˜¯çº¿ç¨‹æ•°æœ€å¤§æ•°æ˜¯ Integer.MAX_VALUEï¼Œå¯èƒ½ä¼šåˆ›å»ºæ•°é‡éå¸¸å¤šçš„çº¿ç¨‹ï¼Œç”šè‡³ OOMã€‚  çº¿ç¨‹æ± é‡Œçš„çº¿ç¨‹æ•°é‡è®¾å®šä¸ºå¤šå°‘æ¯”è¾ƒåˆé€‚ï¼Ÿ  è¿™ä¸ªå¾—çœ‹ä»»åŠ¡ç±»å‹\n CPUå¯†é›†å‹ï¼ˆåŠ å¯†ã€è®¡ç®—hashç­‰ï¼‰ï¼šæœ€ä½³çº¿ç¨‹æ•°ä¸ºCPUæ ¸å¿ƒæ•°çš„1-2å€å·¦å³ã€‚ è€—æ—¶IOå‹ï¼ˆè¯»å†™æ•°æ®åº“ã€æ–‡ä»¶ã€ç½‘ç»œè¯»å†™ç­‰ï¼‰ï¼šæœ€ä½³çº¿ç¨‹æ•°ä¸€èˆ¬ä¼šå¤§äºCPUæ ¸å¿ƒæ•°å¾ˆå¤šå€ ï¼Œå‚è€ƒBrain Goetzä¸“å®¶æ¨èçš„è®¡ç®—æ–¹æ³•ï¼šçº¿ç¨‹æ•°=CPUæ ¸å¿ƒæ•°*ï¼ˆ1+å¹³å‡ç­‰å¾…æ—¶é—´/å¹³å‡å·¥ä½œæ—¶é—´ï¼‰  å¦‚æœéœ€è¦æ›´ç²¾ç¡®çš„çº¿ç¨‹æ•°é‡ï¼Œé‚£å°±éœ€è¦æ ¹æ®ä¸åŒçš„ç¨‹åºå»åšå‹æµ‹ï¼Œè¿™æ ·å°±èƒ½å¾—åˆ°æ¯”è¾ƒåˆé€‚çš„çº¿ç¨‹æ•°é‡ã€‚\nThreadLocal æ¦‚å¿µ ThreadLocalå«åšçº¿ç¨‹å˜é‡ï¼ŒThreadLocalä¸­å¡«å……çš„å˜é‡ å±äºå½“å‰çº¿ç¨‹ï¼Œè¯¥å˜é‡å¯¹å…¶ä»–çº¿ç¨‹è€Œè¨€æ˜¯éš”ç¦»çš„ã€‚ThreadLocalä¸ºå˜é‡åœ¨æ¯ä¸ªçº¿ç¨‹ä¸­éƒ½åˆ›å»ºäº†ä¸€ä¸ªå‰¯æœ¬ï¼Œé‚£ä¹ˆæ¯ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è‡ªå·±å†…éƒ¨çš„å‰¯æœ¬å˜é‡ã€‚\nThreadLocal é€‚ç”¨äºæ¯ä¸ªçº¿ç¨‹å˜é‡åœ¨çº¿ç¨‹é—´éš”ç¦»è€Œåœ¨æ–¹æ³•æˆ–ç±»é—´å…±äº«çš„åœºæ™¯ã€‚\nThreadLocalä¸Synchronizedçš„åŒºåˆ«   ThreadLocal\nThreadLocalåˆ™ç”¨äºçº¿ç¨‹é—´çš„æ•°æ®éš”ç¦»ã€‚ThreadLocalä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½æä¾›äº†å˜é‡çš„å‰¯æœ¬ï¼Œä½¿å¾—æ¯ä¸ªçº¿ç¨‹åœ¨æŸä¸€æ—¶é—´è®¿é—®åˆ°çš„å¹¶ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡\n  Synchronized\nSynchronizedç”¨äºçº¿ç¨‹é—´çš„æ•°æ®å…±äº«ã€‚åˆ©ç”¨é”çš„æœºåˆ¶ï¼Œä½¿å˜é‡æˆ–ä»£ç å—åœ¨æŸä¸€æ—¶è¯¥åªèƒ½è¢«ä¸€ä¸ªçº¿ç¨‹è®¿é—®ã€‚\n  ä½¿ç”¨ public class ThreadLocaDemo {   private static ThreadLocal\u0026lt;String\u0026gt; localVar = new ThreadLocal\u0026lt;String\u0026gt;();   static void print(String str) {  //æ‰“å°å½“å‰çº¿ç¨‹ä¸­æœ¬åœ°å†…å­˜ä¸­æœ¬åœ°å˜é‡çš„å€¼  System.out.println(str + \u0026#34; :\u0026#34; + localVar.get());  //æ¸…é™¤æœ¬åœ°å†…å­˜ä¸­çš„æœ¬åœ°å˜é‡  localVar.remove();  }  public static void main(String[] args) throws InterruptedException {   new Thread(new Runnable() {  public void run() {  ThreadLocaDemo.localVar.set(\u0026#34;local_A\u0026#34;);  print(\u0026#34;A\u0026#34;);  //æ‰“å°æœ¬åœ°å˜é‡  System.out.println(\u0026#34;after remove : \u0026#34; + localVar.get());   }  },\u0026#34;A\u0026#34;).start();   Thread.sleep(1000);   new Thread(new Runnable() {  public void run() {  ThreadLocaDemo.localVar.set(\u0026#34;local_B\u0026#34;);  print(\u0026#34;B\u0026#34;);  System.out.println(\u0026#34;after remove : \u0026#34; + localVar.get());   }  },\u0026#34;B\u0026#34;).start();  } } A :local_A after remove : null B :local_B after remove : null set() ==å‘ThreadLocalé‡Œé¢å­˜ä¸œè¥¿å°±æ˜¯å‘å®ƒé‡Œé¢çš„Mapå­˜ä¸œè¥¿çš„ï¼Œç„¶åThreadLocalæŠŠè¿™ä¸ªMapæŒ‚åˆ°å½“å‰çš„çº¿ç¨‹åº•ä¸‹==\n public void set(T value) {  //1ã€è·å–å½“å‰çº¿ç¨‹  Thread t = Thread.currentThread();  //2ã€è·å–çº¿ç¨‹ä¸­çš„å±æ€§ threadLocalMap ,å¦‚æœthreadLocalMap ä¸ä¸ºç©ºï¼Œ  //åˆ™ç›´æ¥æ›´æ–°è¦ä¿å­˜çš„å˜é‡å€¼ï¼Œå¦åˆ™åˆ›å»ºthreadLocalMapï¼Œå¹¶èµ‹å€¼  ThreadLocalMap map = getMap(t);  if (map != null)  map.set(this, value);  else  // åˆå§‹åŒ–thradLocalMap å¹¶èµ‹å€¼  createMap(t, value);  } ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹å‡ºï¼ŒThreadLocal setèµ‹å€¼çš„æ—¶å€™é¦–å…ˆä¼šè·å–å½“å‰çº¿ç¨‹thread,å¹¶è·å–threadçº¿ç¨‹ä¸­çš„ThreadLocalMapå±æ€§ã€‚å¦‚æœmapå±æ€§ä¸ä¸ºç©ºï¼Œåˆ™ç›´æ¥æ›´æ–°valueå€¼ï¼Œå¦‚æœmapä¸ºç©ºï¼Œåˆ™å®ä¾‹åŒ–threadLocalMap,å¹¶å°†valueå€¼åˆå§‹åŒ–ã€‚\n==ThreadLocalMapå‘¢æ˜¯å½“å‰çº¿ç¨‹Threadä¸€ä¸ªå«threadLocalsçš„å˜é‡ä¸­è·å–çš„ã€‚æ¯ä¸ªçº¿ç¨‹Threadéƒ½ç»´æŠ¤äº†è‡ªå·±çš„threadLocalså˜é‡ï¼Œæ‰€ä»¥åœ¨æ¯ä¸ªçº¿ç¨‹åˆ›å»ºThreadLocalçš„æ—¶å€™ï¼Œå®é™…ä¸Šæ•°æ®æ˜¯å­˜åœ¨è‡ªå·±çº¿ç¨‹Threadçš„threadLocalså˜é‡é‡Œé¢çš„ï¼Œåˆ«äººæ²¡åŠæ³•æ‹¿åˆ°ï¼Œä»è€Œå®ç°äº†éš”ç¦»ã€‚==\nThreadLocalMap getMap(Thread t) {  return t.threadLocals;  }  static class ThreadLocalMap {  /** * The entries in this hash map extend WeakReference, using * its main ref field as the key (which is always a * ThreadLocal object). Note that null keys (i.e. entry.get() * == null) mean that the key is no longer referenced, so the * entry can be expunged from table. Such entries are referred to * as \u0026#34;stale entries\u0026#34; in the code that follows. */  static class Entry extends WeakReference\u0026lt;ThreadLocal\u0026lt;?\u0026gt;\u0026gt; {  /** The value associated with this ThreadLocal. */  Object value;   Entry(ThreadLocal\u0026lt;?\u0026gt; k, Object v) {  super(k);  value = v;  }  }  } å¯çœ‹å‡ºThreadLocalMapæ˜¯ThreadLocalçš„å†…éƒ¨é™æ€ç±»ï¼Œè€Œå®ƒçš„æ„æˆä¸»è¦æ˜¯ç”¨Entryæ¥ä¿å­˜æ•°æ® ï¼Œè€Œä¸”è¿˜æ˜¯ç»§æ‰¿çš„å¼±å¼•ç”¨ã€‚åœ¨Entryå†…éƒ¨ä½¿ç”¨ThreadLocalä½œä¸ºkeyï¼Œä½¿ç”¨æˆ‘ä»¬è®¾ç½®çš„valueä½œä¸ºvalueã€‚IPHPå§¬ç¥¥todo createMap\nget()  public T get() {  //1ã€è·å–å½“å‰çº¿ç¨‹  Thread t = Thread.currentThread();  //2ã€è·å–å½“å‰çº¿ç¨‹çš„ThreadLocalMap  ThreadLocalMap map = getMap(t);  //3ã€å¦‚æœmapæ•°æ®ä¸ºç©ºï¼Œ  if (map != null) {  //3.1ã€è·å–threalLocalMapä¸­å­˜å‚¨çš„å€¼  ThreadLocalMap.Entry e = map.getEntry(this);  if (e != null) {  @SuppressWarnings(\u0026#34;unchecked\u0026#34;)  T result = (T)e.value;  return result;  }  }  //å¦‚æœæ˜¯æ•°æ®ä¸ºnullï¼Œåˆ™åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–çš„ç»“æœï¼ŒTheralLocalMapä¸­å­˜æ”¾keyå€¼ä¸ºthreadLocalï¼Œå€¼ä¸ºnull  return setInitialValue();  }  private T setInitialValue() {  T value = initialValue();  Thread t = Thread.currentThread();  ThreadLocalMap map = getMap(t);  if (map != null)  map.set(this, value);  else  createMap(t, value);  return value;  } remove()  public void remove() {  ThreadLocalMap m = getMap(Thread.currentThread());  if (m != null)  m.remove(this); } removeæ–¹æ³•ï¼Œç›´æ¥å°†ThrealLocal å¯¹åº”çš„å€¼ä»å½“å‰ç›¸å·®Threadä¸­çš„ThreadLocalMapä¸­åˆ é™¤ã€‚ä¸ºä»€ä¹ˆè¦åˆ é™¤ï¼Œè¿™æ¶‰åŠåˆ°å†…å­˜æ³„éœ²çš„é—®é¢˜ã€‚\nå¦‚ä¸Šæ‰€è¯´ï¼ˆLocalè·³è½¬æ–¹å¼ï¼ŒShimoè·³è½¬æ–¹å¼ï¼‰ï¼Œ ThreadLocalMap ä¸­ä½¿ç”¨çš„ key ä¸º ThreadLocal çš„å¼±å¼•ç”¨ï¼Œå¼±å¼•ç”¨çš„ç‰¹ç‚¹æ˜¯ï¼Œå¦‚æœè¿™ä¸ªå¯¹è±¡åªå­˜åœ¨å¼±å¼•ç”¨ï¼Œé‚£ä¹ˆåœ¨ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶çš„æ—¶å€™å¿…ç„¶ä¼šè¢«æ¸…ç†æ‰ã€‚\næ‰€ä»¥å¦‚æœ ThreadLocal æ²¡æœ‰è¢«å¤–éƒ¨å¼ºå¼•ç”¨çš„æƒ…å†µä¸‹ï¼Œåœ¨åƒåœ¾å›æ”¶çš„æ—¶å€™ä¼šè¢«æ¸…ç†æ‰çš„ï¼Œè¿™æ ·ä¸€æ¥ ThreadLocalMapä¸­ä½¿ç”¨è¿™ä¸ª ThreadLocal çš„ key ä¹Ÿä¼šè¢«æ¸…ç†æ‰ã€‚ä½†æ˜¯ï¼Œvalue æ˜¯å¼ºå¼•ç”¨ï¼Œä¸ä¼šè¢«æ¸…ç†ï¼Œè¿™æ ·ä¸€æ¥å°±ä¼šå‡ºç° key ä¸º null çš„ valueã€‚è¿™æ ·å°±é€ æˆäº†å†…å­˜æ³„éœ²ã€‚\nThreadLocalä¸Threadï¼ŒThreadLocalMapä¹‹é—´çš„å…³ç³» ThreadLocal å¸¸è§ä½¿ç”¨åœºæ™¯ å‚è€ƒ====ã€‹ThreadLocalçš„åº”ç”¨åœºæ™¯ - sw_kong - åšå®¢å›­ (cnblogs.com)\nåœºæ™¯çš„éœ€æ±‚ï¼š\n æ¯ä¸ªçº¿ç¨‹éœ€è¦æœ‰è‡ªå·±å•ç‹¬çš„å®ä¾‹ å®ä¾‹éœ€è¦åœ¨å¤šä¸ªæ–¹æ³•ä¸­å…±äº«ï¼Œä½†ä¸å¸Œæœ›å˜é‡è¢«å¤šçº¿ç¨‹å…±äº« ThreadLocal ç”¨ä½œæ¯ä¸ªçº¿ç¨‹å†…éœ€è¦ç‹¬ç«‹ä¿å­˜ä¿¡æ¯ï¼Œä»¥ä¾¿ä¾›å…¶ä»–æ–¹æ³•æ›´æ–¹ä¾¿åœ°è·å–è¯¥ä¿¡æ¯çš„åœºæ™¯ã€‚æ¯ä¸ªçº¿ç¨‹è·å–åˆ°çš„ä¿¡æ¯å¯èƒ½éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œå‰é¢æ‰§è¡Œçš„æ–¹æ³•ä¿å­˜äº†ä¿¡æ¯åï¼Œåç»­æ–¹æ³•å¯ä»¥é€šè¿‡ThreadLocal ç›´æ¥è·å–åˆ°ï¼Œé¿å…äº†ä¼ å‚ï¼Œç±»ä¼¼äºå…¨å±€å˜é‡çš„æ¦‚å¿µã€‚  SimpleDateFormat ï¼ˆJava8é‡Œçš„ java.time.format.DateTimeFormatter æ˜¯çº¿ç¨‹å®‰å…¨çš„ ï¼Œç”±äºå®ƒè°ƒç”¨çš„parseResolved0 æ–¹æ³•å…¥å‚éƒ½æ˜¯final ä¿®é¥°çš„ï¼Œä¸å¯å˜å˜é‡æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ï¼‰\nå½“æ—¶æˆ‘ä»¬ä½¿ç”¨SimpleDataFormatçš„parse()æ–¹æ³•ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ªCalendarå¯¹è±¡ï¼Œè°ƒç”¨SimpleDataFormatçš„parse()æ–¹æ³•ä¼šå…ˆè°ƒç”¨Calendar.clearï¼ˆï¼‰ï¼Œç„¶åè°ƒç”¨Calendar.add()ã€‚ThreadLocal_æ•–ä¸™-CSDNåšå®¢ã€‚å¦‚æœä¸€ä¸ªçº¿ç¨‹å…ˆè°ƒç”¨äº†add()ç„¶åå¦ä¸€ä¸ªçº¿ç¨‹åˆè°ƒç”¨äº†clear()ï¼Œè¿™æ—¶å€™parse()æ–¹æ³•è§£æçš„æ—¶é—´å°±ä¸å¯¹äº†ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ªThreadå†…éƒ½æœ‰è‡ªå·±çš„å®ä¾‹å‰¯æœ¬ï¼Œä¸”è¯¥å‰¯æœ¬åªèƒ½ç”±å½“å‰Threadè®¿é—®åˆ°å¹¶ä½¿ç”¨ï¼Œç›¸å½“äºæ¯ä¸ªçº¿ç¨‹å†…éƒ¨çš„æœ¬åœ°å˜é‡ï¼Œè¿™ä¹Ÿæ˜¯ThreadLocalå‘½åçš„å«ä¹‰ã€‚å› ä¸ºæ¯ä¸ªçº¿ç¨‹ç‹¬äº«å‰¯æœ¬ï¼Œè€Œä¸æ˜¯å…¬ç”¨çš„ï¼Œæ‰€ä»¥ä¸å­˜åœ¨å¤šçº¿ç¨‹é—´å…±äº«çš„é—®é¢˜ã€‚\næ¯”å¦‚æœ‰1000ä¸ªçº¿ç¨‹éƒ½è¦ç”¨åˆ°SimpleDateFormat\npublic class ThreadLocalDemo011 {  public static ExecutorService threadPool = Executors.newFixedThreadPool(16);   public static void main(String[] args) throws InterruptedException {   for (int i = 0; i \u0026lt; 1000; i++) {  int finalI = i;  threadPool.submit(() -\u0026gt; {  String data = new ThreadLocalDemo011().date(finalI);  System.out.println(data);  });  }  threadPool.shutdown();  }  public static Integer id= 0;  private String date(int seconds){  Date date = new Date(1000 * seconds);  id++;  System.out.println(id+\u0026#34;=============\u0026#34;);  SimpleDateFormat simpleDateFormat = new SimpleDateFormat(\u0026#34;mm:ss\u0026#34;);  return simpleDateFormat.format(date);  } } å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬ç”¨äº†ä¸€ä¸ª16çº¿ç¨‹çš„çº¿ç¨‹æ± ï¼Œå¹¶ä¸”ç»™è¿™ä¸ªçº¿ç¨‹æ± æäº¤äº†1000æ¬¡ä»»åŠ¡ã€‚æ¯ä¸ªä»»åŠ¡ä¸­å®ƒåšçš„äº‹æƒ…å’Œä¹‹å‰æ˜¯ä¸€æ ·çš„ï¼Œè¿˜æ˜¯å»æ‰§è¡Œdateæ–¹æ³•ï¼Œå¹¶ä¸”åœ¨è¿™ä¸ªæ–¹æ³•ä¸­åˆ›å»ºä¸€ä¸ªsimpleDateFormat å¯¹è±¡ã€‚è¿‘1000ä¸ªsimpleDateFormat å¯¹è±¡ä¼šè¢«åˆ›å»ºã€‚\nè¿™ä¹ˆå¤šå¯¹è±¡çš„åˆ›å»ºæ˜¯æœ‰å¼€é”€çš„ï¼Œå¹¶ä¸”åœ¨ä½¿ç”¨å®Œä¹‹åçš„é”€æ¯åŒæ ·æ˜¯æœ‰å¼€é”€çš„ï¼ŒåŒæ—¶å­˜åœ¨åœ¨å†…å­˜ä¸­ä¹Ÿæ˜¯ä¸€ç§å†…å­˜çš„æµªè´¹ã€‚\næˆ‘ä»¬å¯èƒ½ä¼šæƒ³åˆ°ï¼Œè¦ä¸æ‰€æœ‰çš„çº¿ç¨‹å…±ç”¨ä¸€ä¸ª simpleDateFormat å¯¹è±¡ï¼Ÿä½†æ˜¯simpleDateFormat åˆä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæˆ‘ä»¬å¿…é¡»åšåŒæ­¥ï¼Œæ¯”å¦‚ä½¿ç”¨synchronizedåŠ é”ã€‚åˆ°è¿™é‡Œä¹Ÿè®¸å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆçš„ä¸€ä¸ªè§£å†³æ–¹æ³•ã€‚ä½†æ˜¯ä½¿ç”¨synchronizedåŠ é”ä¼šé™·å…¥ä¸€ç§æ’é˜Ÿçš„çŠ¶æ€ï¼Œå¤šä¸ªçº¿ç¨‹ä¸èƒ½åŒæ—¶å·¥ä½œï¼Œè¿™æ ·ä¸€æ¥ï¼Œæ•´ä½“çš„æ•ˆç‡å°±è¢«å¤§å¤§é™ä½äº†ã€‚\n ä½¿ç”¨ThreadLocal  å¯¹è¿™ç§åœºæ™¯ï¼ŒThreadLocalå†åˆé€‚ä¸è¿‡äº†ï¼ŒThreadLocalç»™æ¯ä¸ªçº¿ç¨‹ç»´æŠ¤ä¸€ä¸ªè‡ªå·±çš„simpleDateFormatå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨çº¿ç¨‹ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ï¼Œäº’ç›¸æ²¡æœ‰å…³ç³»çš„ã€‚è¿™ä¹Ÿå°±é¿å…äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ä¸æ­¤åŒæ—¶ï¼ŒsimpleDateFormatå¯¹è±¡è¿˜ä¸ä¼šåˆ›é€ è¿‡å¤šï¼Œçº¿ç¨‹æ± ä¸€å…±åªæœ‰ 16 ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥éœ€è¦16ä¸ªå¯¹è±¡å³å¯ã€‚\npublic class ThreadLocalDemo04 {   public static ExecutorService threadPool = Executors.newFixedThreadPool(16);   public static void main(String[] args) throws InterruptedException {   for (int i = 0; i \u0026lt; 1000; i++) {  int finalI = i;  threadPool.submit(() -\u0026gt; {  String data = new ThreadLocalDemo04().date(finalI);  System.out.println(data);  });  }  threadPool.shutdown();  }   private String date(int seconds){  Date date = new Date(1000 * seconds);  SimpleDateFormat dateFormat = ThreadSafeFormater.dateFormatThreadLocal.get();  return dateFormat.format(date);  } }  class ThreadSafeFormater{  public static Integer id= 0;  public static ThreadLocal\u0026lt;SimpleDateFormat\u0026gt; dateFormatThreadLocal = ThreadLocal.withInitial(() -\u0026gt; {  id++;  System.out.println(id+\u0026#34;=============\u0026#34;);  return new SimpleDateFormat(\u0026#34;mm:ss\u0026#34;);  }); }   ç»“æœï¼š\nå¯ä»¥çœ‹å‡ºåªåˆ›å»ºäº†16ä¸ªSimpleDateFormatå¯¹è±¡ã€‚\n  1=============\r4=============\r5=============\r6=============\r3=============\r7=============\r2=============\r8=============\r9=============\r10=============\r11=============\r13=============\r12=============\r14=============\r15=============\r16=============\r00:09\r00:16\r00:17\r........\r........\r16:05\r16:04\r16:03\r16:02  é—®é¢˜ï¼š  è¿™ç§æƒ…å†µæ¯ä¸ªçº¿ç¨‹çš„SimpleDataFormatçš„parse()æ–¹æ³•ï¼Œåœ¨ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œåå…¶ä»–ä»»åŠ¡ç»§ç»­ä½¿ç”¨è¿™ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä¼šä¸ä¼šé€ æˆæ•°æ®æ··ä¹±ã€‚   ç­”æ¡ˆ  ä¸ä¼šï¼ŒSimpleDataFormatçš„parse()æ–¹æ³•ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ªCalendarå¯¹è±¡ï¼Œè°ƒç”¨SimpleDataFormatçš„parse()æ–¹æ³•ä¼šå…ˆè°ƒç”¨Calendar.clear()æ¸…é™¤æ•°æ®ï¼Œç„¶åè°ƒç”¨Calendar.add()æ·»åŠ æ•°æ®ã€‚    ç”¨æˆ·ä¿¡æ¯ï¼ˆç±»ä¼¼çº¿ç¨‹å†…çš„å…¨å±€å˜é‡ï¼‰ æ¯ä¸ªçº¿ç¨‹å†…éœ€è¦ä¿å­˜ç±»ä¼¼äºå…¨å±€å˜é‡çš„ä¿¡æ¯ï¼ˆä¾‹å¦‚åœ¨æ‹¦æˆªå™¨ä¸­è·å–çš„ç”¨æˆ·ä¿¡æ¯ï¼‰ï¼Œå¯ä»¥è®©ä¸åŒæ–¹æ³•ç›´æ¥ä½¿ç”¨ï¼Œé¿å…å‚æ•°ä¼ é€’çš„éº»çƒ¦å´ä¸æƒ³è¢«å¤šçº¿ç¨‹å…±äº«ï¼ˆå› ä¸ºä¸åŒçº¿ç¨‹è·å–åˆ°çš„ç”¨æˆ·ä¿¡æ¯ä¸ä¸€æ ·ï¼‰ã€‚\nä¾‹å¦‚ï¼Œç”¨ ThreadLocal ä¿å­˜ä¸€äº›ä¸šåŠ¡å†…å®¹ï¼ˆç”¨æˆ·æƒé™ä¿¡æ¯ã€ä»ç”¨æˆ·ç³»ç»Ÿè·å–åˆ°çš„ç”¨æˆ·åã€ç”¨æˆ·ID ç­‰ï¼‰ï¼Œè¿™äº›ä¿¡æ¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹å†…ç›¸åŒï¼Œä½†æ˜¯ä¸åŒçš„çº¿ç¨‹ä½¿ç”¨çš„ä¸šåŠ¡å†…å®¹æ˜¯ä¸ç›¸åŒçš„ã€‚\nåœ¨çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸå†…ï¼Œéƒ½é€šè¿‡è¿™ä¸ªé™æ€ ThreadLocal å®ä¾‹çš„ get() æ–¹æ³•å–å¾—è‡ªå·± set è¿‡çš„é‚£ä¸ªå¯¹è±¡ï¼Œé¿å…äº†å°†è¿™ä¸ªå¯¹è±¡ï¼ˆå¦‚ user å¯¹è±¡ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’çš„éº»çƒ¦ã€‚\næ¯”å¦‚è¯´æˆ‘ä»¬æ˜¯ä¸€ä¸ªç”¨æˆ·ç³»ç»Ÿï¼Œé‚£ä¹ˆå½“ä¸€ä¸ªè¯·æ±‚è¿›æ¥çš„æ—¶å€™ï¼Œä¸€ä¸ªçº¿ç¨‹ä¼šè´Ÿè´£æ‰§è¡Œè¿™ä¸ªè¯·æ±‚ï¼Œç„¶åè¿™ä¸ªè¯·æ±‚å°±ä¼šä¾æ¬¡è°ƒç”¨service-1()ã€service-2()ã€service-3()ã€service-4()ï¼Œè¿™4ä¸ªæ–¹æ³•å¯èƒ½æ˜¯åˆ†å¸ƒåœ¨ä¸åŒçš„ç±»ä¸­çš„ã€‚\npackage com.kong.threadlocal;   public class ThreadLocalDemo05 {  public static void main(String[] args) {  User user = new User(\u0026#34;jack\u0026#34;);  new Service1().service1(user);  } }  class Service1 {  public void service1(User user){  //ç»™ThreadLocalèµ‹å€¼ï¼Œåç»­çš„æœåŠ¡ç›´æ¥é€šè¿‡ThreadLocalè·å–å°±è¡Œäº†ã€‚  UserContextHolder.holder.set(user);  new Service2().service2();  } }  class Service2 {  public void service2(){  User user = UserContextHolder.holder.get();  System.out.println(\u0026#34;service2æ‹¿åˆ°çš„ç”¨æˆ·:\u0026#34;+user.name);  new Service3().service3();  } }  class Service3 {  public void service3(){  User user = UserContextHolder.holder.get();  System.out.println(\u0026#34;service3æ‹¿åˆ°çš„ç”¨æˆ·:\u0026#34;+user.name);  //åœ¨æ•´ä¸ªæµç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œä¸€å®šè¦æ‰§è¡Œremove  UserContextHolder.holder.remove();  } }  class UserContextHolder {  //åˆ›å»ºThreadLocalä¿å­˜Userå¯¹è±¡  public static ThreadLocal\u0026lt;User\u0026gt; holder = new ThreadLocal\u0026lt;\u0026gt;(); }  class User {  String name;  public User(String name){  this.name = name;  } } å®ˆæŠ¤çº¿ç¨‹ é¢è¯•é¢˜ çº¿ç¨‹æ± åˆ›å»ºçš„4ä¸­æ–¹æ³• Localè·³è½¬æ–¹å¼ï¼ŒShimoè·³è½¬æ–¹å¼\nä»»åŠ¡åŠ å…¥çš„çº¿ç¨‹æ± çš„æµç¨‹ Localè·³è½¬æ–¹å¼ï¼ŒShimoè·³è½¬æ–¹å¼\nçº¿ç¨‹æ± çš„7ä¸ªå‚æ•°ã€‚æ‹’ç»ç­–ç•¥ã€‚ å‚æ•°ï¼šLocalè·³è½¬æ–¹å¼ï¼ŒShimoè·³è½¬æ–¹å¼\næ‹’ç»ç­–ç•¥ï¼šLocalè·³è½¬æ–¹å¼ï¼ŒShimoè·³è½¬æ–¹å¼\nçº¿ç¨‹æ± ä¸­å¦‚ä½•æ‹¿åˆ°çº¿ç¨‹çš„æ‰§è¡Œç»“æœ çº¿ç¨‹æ± ä¸­ submit()å’Œ execute()æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ   execute()ï¼šåªèƒ½æ‰§â¾ Runnable ç±»å‹çš„ä»»åŠ¡ã€‚\n  submit()ï¼šå¯ä»¥æ‰§â¾ Runnable å’Œ Callable ç±»å‹çš„ä»»åŠ¡ã€‚\n  æ­»é” ä¸¤çº¿ç¨‹éƒ½æœ‰å„è‡ªçš„é”ï¼Œå¹¶éƒ½å°è¯•å»è·å–ç‹¬å å¯¹æ–¹çš„é”ï¼Œå°±ä¼šå‘ç”Ÿé˜»å¡çš„ç°è±¡ã€‚\nè§£é‡Šä¸‹ç”Ÿäº§æ¶ˆè´¹æ¨¡å‹ ç”Ÿäº§è€…æ¶ˆè´¹è€…èƒ½å¤Ÿè§£å†³çš„é—®é¢˜å¦‚ä¸‹ï¼š\n ç”Ÿäº§ä¸æ¶ˆè´¹çš„é€Ÿåº¦ä¸åŒ¹é… è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­è§£è€¦  ç”Ÿäº§è€…ç”Ÿäº§ï¼Œæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œè¿™å°±å¿…ç„¶å­˜åœ¨ä¸€ä¸ªä¸­é—´å®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå®¹å™¨æƒ³è±¡æˆæ˜¯ä¸€ä¸ªè´§æ¶ï¼Œå½“è´§æ¶ç©ºçš„æ—¶å€™ï¼Œç”Ÿäº§è€…è¦ç”Ÿäº§äº§å“ï¼Œæ­¤æ—¶æ¶ˆè´¹è€…åœ¨ç­‰å¾…ç”Ÿäº§è€…å¾€è´§æ¶ä¸Šç”Ÿäº§äº§å“ï¼Œè€Œå½“è´§æ¶æ»¡çš„æ—¶å€™ï¼Œæ¶ˆè´¹è€…å¯ä»¥ä»è´§æ¶ä¸Šæ‹¿èµ°å•†å“ï¼Œç”Ÿäº§è€…æ­¤æ—¶ç­‰å¾…è´§æ¶çš„ç©ºä½ï¼Œè¿™æ ·ä¸æ–­çš„å¾ªç¯ã€‚é‚£ä¹ˆåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ˜¯ä¸ç›´æ¥æ¥è§¦çš„ï¼Œæ‰€è°“çš„â€˜è´§æ¶â€™å…¶å®å°±æ˜¯ä¸€ä¸ª==é˜»å¡é˜Ÿåˆ—==ï¼Œç”Ÿäº§è€…ç”Ÿäº§çš„äº§å“ä¸ç›´æ¥ç»™æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œè€Œæ˜¯ä»ç»™é˜»å¡é˜Ÿåˆ—ï¼Œè¿™ä¸ªé˜»å¡é˜Ÿåˆ—å°±æ˜¯æ¥è§£å†³ç”Ÿäº§è€…æ¶ˆè´¹è€…çš„å¼ºè€¦åˆçš„ã€‚å°±æ˜¯ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ã€‚TPâ‘ ï¼ŒTPâ‘¡\nå‚è€ƒ  ThreadLocalåŸç†åˆ†æä¸ä½¿ç”¨åœºæ™¯ - é˜¿å‡¡å¢ - åšå®¢å›­ (cnblogs.com) ThreadLocalçš„åº”ç”¨åœºæ™¯ - sw_kong - åšå®¢å›­ (cnblogs.com) ThreadLocal_æ•–ä¸™-CSDNåšå®¢ CSDNåšå®¢_ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ Java8ä¹‹Consumerã€Supplierã€Predicateå’ŒFunctionæ”»ç•¥ åšå®¢å›­ ","id":13,"section":"posts","summary":"","tags":["Thread"],"title":"Thread","uri":"https://gb.ytte.top/1/01/01/thread/","year":"0001"},{"content":"ä½¿ç”¨typoraå†™æ–‡æ¡£ä¼ å›¾ç‰‡ï¼Œå†ä¸Šä¼ çŸ³å¢¨ç­‰ç½‘ç«™çš„å¥½æ–¹æ³• 1. typoraä¸‹è½½ typoraå¼€å§‹æ”¶è´¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸æ”¶è´¹çš„è€ç‰ˆæœ¬ ä¸‹è½½é“¾æ¥\n2. typoraå›¾åºŠ picgotyporaä¸åƒwordï¼Œwordå¯ä»¥ç›´æ¥å°†ä¸Šä¼ çš„å›¾ç‰‡ä¿å­˜åœ¨æ–‡ä»¶å½“ä¸­ï¼Œè€Œtyporaä¸è¡Œã€‚ä½†æ˜¯typoraæ”¯æŒpicgoæ’ä»¶çš„ä½¿ç”¨ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬ä¸‹åœ¨picgo ä¸‹è½½é“¾æ¥\n3. ä¸ƒç‰›äº‘å’Œpicgoçš„ä½¿ç”¨ï¼ŒäºŒçº§åŸŸåï¼ˆå¦‚æœä¸æƒ³å¼„ç›´æ¥ç¬¬4æ­¥éª¤ï¼‰ æ³¨å†Œä¸ƒç‰›äº‘ ï¼Œå¹¶å¼€é€šå¯¹è±¡å­˜å‚¨ picgoä½¿ç”¨ä¸ƒç‰›äº‘å›¾åºŠ - çŸ¥ä¹ ã€‚ä¸ºä¸ƒç‰›äº‘é…ç½®äºŒçº§åŸŸåï¼ˆå‰ææ˜¯æœ‰äº†ä¸€çº§åŸŸåï¼‰ï¼šäºŒçº§åŸŸå-çŸ³å¢¨\n4. picgo é…ç½®ï¼š è¿›å…¥picgoï¼Œç‚¹å‡»å·¦ä¾§çš„å›¾åºŠè®¾ç½®ï¼Œé€‰æ‹©ä¸ƒç‰›å›¾åºŠã€‚æŒ‰ä¸‹å›¾æ‰€ç¤ºå¡«å†™é…ç½®ï¼ŒSecretKeyå‘ j j ç´¢å–ã€‚\n SbOIcbA56xQGcpZyyLDtuARvi3COHhlBxa-IZxDi\nytte-picgo\nhttps://blogimg.ytte.top/\nz2\nimg-sunsifan/æˆ–è€…æ˜¯img-wuhao\n ä¼æ˜Šï¼š\nå­™æ€å‡¡ï¼š\nå°†æœ€å ä¸€é¡¹ï¼ŒæŒ‡å®šå­˜å‚¨è·¯å¾„æ›´æ”¹ä¸ºï¼šimg-sunsifanã€‚\n5. typoraè®¾ç½®   æ‰“å¼€typoraåï¼Œ\n  ç‚¹å‡»å·¦ä¸Šè§’æ–‡ä»¶ï¼Œ\n  ç‚¹å‡»åå¥½è®¾ç½®ï¼Œ\n  ç‚¹å‡»å›¾åƒï¼Œ\n  å¦‚å›¾è¿›è¡Œé…ç½®ï¼Œ\n   æˆåŠŸå°±ä¼šå‡ºç°å¦‚å›¾ä¿¡æ¯ï¼Œ  ==å¤§åŠŸå‘Šæˆ==\n6. picgoçš„ä½¿ç”¨ ä½¿ç”¨æˆªå›¾è½¯ä»¶æˆªå›¾ï¼Œæ‰“å¼€picgoç‚¹è®°å·¦ä¾§çš„ä¸Šä¼ åŒºï¼Œç‚¹å‡»å‰ªåˆ‡æ¿å›¾ç‰‡ä¸Šä¼ ï¼Œä¸Šä¼ æˆåŠŸåè‡ªåŠ¨å°†å›¾ç‰‡åœ°å€è¿”å›åˆ°å‰ªåˆ‡æ¿å½“ä¸­ã€‚\n æ³¨æ„ï¼šå¦‚æœç›´æ¥æˆªå›¾åç›´æ¥ç²˜è´´åˆ°typoraæ–‡ä¸­ï¼Œä½¿ç”¨çš„æ˜¯æ ‡ç­¾ï¼Œåœ¨æœ‰çš„ç¼–è¾‘å™¨ä¸èƒ½æ­£å¸¸è¯†åˆ«ï¼ˆæ¯”å¦‚çŸ³å¢¨ï¼‰ï¼Œæ‰€ä»¥æœ€å¥½å…ˆæŒ‰ä¸Šé¢æ–¹æ³•ã€‚\n","id":14,"section":"posts","summary":"","tags":["typora"],"title":"typora","uri":"https://gb.ytte.top/1/01/01/typora/","year":"0001"},{"content":"è°·ç²’å•†åŸæ­¥éª¤ç¬”è®° ä½¿ç”¨äººäººä»£ç ç”Ÿæˆå™¨ è§†é¢‘====ã€‹è°·ç²’å•†åŸâ€”â€”p17\n  cloneäººäººä»£ç ç”Ÿæˆå™¨\n  æ”¾è¿›é¡¹ç›®ä¸­åŠ å…¥æ¨¡å—\n  åœ¨application.ymlä¿®æ”¹æ•°æ®åº“ç›¸å…³ä¿¡æ¯\n  åœ¨generator.propertiesä¸­ä¿®æ”¹å‚æ•°\nmainPath=com.atguigu #åŒ…å package=com.atguigu.gulimall moduleName=product #ä½œè€… author=yttejx #Email email=1026190684@qq.com #è¡¨å‰ç¼€(ç±»åä¸ä¼šåŒ…å«è¡¨å‰ç¼€) tablePrefix=pms_   æ›´æ”¹renren-generatorçš„resourcesçš„templateçš„Controlleræ¨¡æ¿ä¸­@RequiresPermissionsæ³¨è§£å’Œå¯¼åŒ…æ³¨é‡Šæ‰ï¼Œä»¥åå†å¯¼å…¥ä½¿ç”¨ã€‚\n  å¯åŠ¨renren-generatorçš„Applicationã€‚ç½‘é¡µè®¿é—®localhost:80ï¼Œç‚¹å‡»æ˜¾ç¤ºå…¨éƒ¨è¡¨æ ¼ï¼Œå…¨é€‰è¡¨æ ¼ï¼Œç‚¹å‡»ç”Ÿæˆä»£ç ã€‚\n  å°†ç”Ÿæˆçš„ä»£ç ä¸­mainåŒ…å¤åˆ¶ç²˜è´´åˆ°producté¡¹ç›®ä¸‹ã€‚\n  æ–°å»ºæ¨¡å—ï¼ˆmavenï¼‰å–åï¼Œgulimall_commonï¼ˆé¡¹ç›®çš„å…¬å…±èµ„æºå…¨éƒ¨æ”¾åœ¨è¿™é‡Œï¼‰\n  æŸ¥çœ‹producté¡¹ç›®ä¸­æŠ¥é”™ä¿¡æ¯ã€‚å°†ç›¸åº”çš„pom å’Œç±»ï¼ˆrenrenè‡ªå·±åˆ›å»ºçš„å·¥å…·ç±»ï¼‰åŠ å…¥åˆ°commoné¡¹ç›®ä¸­\nä»renren-fasterä¸­å¯¼å…¥\n  åŒ…ï¼š\n exception utils  Constant PageUtils Query R validator xss  å»æ‰XssFilterå’ŒXssHttpServletRequestWrapperï¼Œæ˜¯é˜²è·¨ç«™è„šæœ¬æ”»å‡»çš„ï¼Œä»¥åç”¨springsecurityæ¥å®ç°ã€‚ è¿™é‡Œéœ€è¦å¯¼åŒ…Servletï¼ŒåŒæ—¶è®¾ç½®scope ä¸ºprovidedï¼Œå› ä¸ºtomcatå†…æœ‰Servlet        pomï¼š\n  \u0026lt;properties\u0026gt; \t\u0026lt;maven.compiler.source\u0026gt;8\u0026lt;/maven.compiler.source\u0026gt;  \u0026lt;maven.compiler.target\u0026gt;8\u0026lt;/maven.compiler.target\u0026gt;  \u0026lt;mybatis.plus.boot.starter.version\u0026gt;3.5.1\u0026lt;/mybatis.plus.boot.starter.version\u0026gt;  \u0026lt;lombok.version\u0026gt;1.18.22\u0026lt;/lombok.version\u0026gt;  \u0026lt;commons.lang.version\u0026gt;2.6\u0026lt;/commons.lang.version\u0026gt;  \u0026lt;httpcore.version\u0026gt;4.4.15\u0026lt;/httpcore.version\u0026gt;  \u0026lt;shiro.version\u0026gt;1.4.0\u0026lt;/shiro.version\u0026gt;  \u0026lt;commons.io.version\u0026gt;2.5\u0026lt;/commons.io.version\u0026gt;  \u0026lt;mysql.connector.version\u0026gt;8.0.28\u0026lt;/mysql.connector.version\u0026gt;  \u0026lt;/properties\u0026gt;  \u0026lt;dependencies\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;com.baomidou\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;mybatis-plus-boot-starter\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;${mybatis.plus.boot.starter.version}\u0026lt;/version\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;org.projectlombok\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;lombok\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;${lombok.version}\u0026lt;/version\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;commons-lang\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;commons-lang\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;${commons.lang.version}\u0026lt;/version\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;!-- https://mvnrepository.com/artifact/org.apache.httpcomponents/httpcore --\u0026gt;  \u0026lt;!--java å‘é€httpè¯·æ±‚--\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;org.apache.httpcomponents\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;httpcore\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;${httpcore.version}\u0026lt;/version\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;commons-io\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;commons-io\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;${commons.io.version}\u0026lt;/version\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;org.apache.shiro\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;shiro-core\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;${shiro.version}\u0026lt;/version\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;org.apache.shiro\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;shiro-spring\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;${shiro.version}\u0026lt;/version\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;mysql\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;mysql-connector-java\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;${mysql.connector.version}\u0026lt;/version\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;javax.servlet\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;servlet-api\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;2.5\u0026lt;/version\u0026gt;  \u0026lt;scope\u0026gt;provided\u0026lt;/scope\u0026gt;  \u0026lt;!-- tomcatå†…æœ‰Servlet--\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;dependency\u0026gt;  \u0026lt;groupId\u0026gt;jakarta.validation\u0026lt;/groupId\u0026gt;  \u0026lt;artifactId\u0026gt;jakarta.validation-api\u0026lt;/artifactId\u0026gt;  \u0026lt;version\u0026gt;2.0.2\u0026lt;/version\u0026gt;  \u0026lt;/dependency\u0026gt;  \u0026lt;/dependencies\u0026gt;   productçš„UndoLogEntityçš„rollbackInfoå±æ€§ï¼Œæ•°æ®åº“ä¸­ä½¿ç”¨çš„æ˜¯Longblobï¼Œå®ä½“ç±»ä¸­ä½¿ç”¨byte[]ã€‚\n  é…ç½®\u0026amp;æµ‹è¯•æœåŠ¡çš„crudåŠŸèƒ½ è§†é¢‘====ã€‹è°·ç²’å•†åŸâ€”â€”p18\n  æ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦crudï¼Œæ‰€ä»¥åœ¨commonä¸­å¯¼å…¥mysqlé©±åŠ¨\n  é…ç½®æ•°æ®æº\nspring:  datasource:  username: root  password: as123  url: jdbc:mysql://localhost:3380/gulimall_pms?useUnicode=true\u0026amp;characterEncoding=UTF-8\u0026amp;useSSL=false\u0026amp;serverTimezone=Asia/Shanghai  driver-class-name: com.mysql.cj.jdbc.Driver   é…ç½®mybatis-plus\n ä½¿ç”¨MapperScan  @MapperScan(\u0026#34;com.atguigu.gulimall.product.dao\u0026#34;)   å‘Šè¯‰mybatis-plusï¼Œsqlæ˜ å°„æ–‡ä»¶ä½ç½®\nä½¿ç”¨è‡ªå¢ä¸»é”®ï¼ˆä»¥åæ•°æ®é‡å¤§äº†åœ¨ä½¿ç”¨å…¶ä»–ä¸»é”®ç­–ç•¥ï¼‰\nmybatis-plus:  mapper-locations: classpath*:/mapper/**/*.xml  global-config:  db-config:  id-type: auto   crudæµ‹è¯•\n@Test  void contextLoads() {  BrandEntity brandEntity = new BrandEntity();  brandEntity.setName(\u0026#34;åä¸º\u0026#34;);   brandService.save(brandEntity);  System.out.println(\u0026#34;ä¿å­˜æˆåŠŸ----------\u0026#34;);   brandEntity.setBrandId(1L);  brandEntity.setDescript(\u0026#34;åä¸ºæ‰‹æœº\u0026#34;);  brandService.updateById(brandEntity);  System.out.println(\u0026#34;æ›´æ–°æˆåŠŸ---------\u0026#34;);   List\u0026lt;BrandEntity\u0026gt; list = brandService.list(new LambdaQueryWrapper\u0026lt;BrandEntity\u0026gt;().eq(BrandEntity::getBrandId, \u0026#34;1\u0026#34;));  list.forEach(System.out::println);  System.out.println(\u0026#34;æŸ¥è¯¢æˆåŠŸ---------\u0026#34;);  }     é€†å‘å·¥ç¨‹ç”Ÿæˆæ‰€æœ‰ä»£ç  è§†é¢‘====ã€‹p19\nåˆ†","id":15,"section":"posts","summary":"","tags":["è°·ç²’å•†åŸ"],"title":"è°·ç²’å•†åŸæ­¥éª¤ç¬”è®°","uri":"https://gb.ytte.top/1/01/01/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E%E6%AD%A5%E9%AA%A4%E7%AC%94%E8%AE%B0/","year":"0001"}],"tags":[{"title":"git","uri":"https://gb.ytte.top/tags/git/"},{"title":"Gitee","uri":"https://gb.ytte.top/tags/gitee/"},{"title":"github","uri":"https://gb.ytte.top/tags/github/"},{"title":"Https","uri":"https://gb.ytte.top/tags/https/"},{"title":"index","uri":"https://gb.ytte.top/tags/index/"},{"title":"JVM","uri":"https://gb.ytte.top/tags/jvm/"},{"title":"MySQL","uri":"https://gb.ytte.top/tags/mysql/"},{"title":"SpringBoot","uri":"https://gb.ytte.top/tags/springboot/"},{"title":"SpringCloud","uri":"https://gb.ytte.top/tags/springcloud/"},{"title":"Thread","uri":"https://gb.ytte.top/tags/thread/"},{"title":"typora","uri":"https://gb.ytte.top/tags/typora/"},{"title":"ZooKeeper","uri":"https://gb.ytte.top/tags/zookeeper/"},{"title":"åŸŸå","uri":"https://gb.ytte.top/tags/%E5%9F%9F%E5%90%8D/"},{"title":"åŸºç¡€","uri":"https://gb.ytte.top/tags/%E5%9F%BA%E7%A1%80/"},{"title":"è°·ç²’å•†åŸ","uri":"https://gb.ytte.top/tags/%E8%B0%B7%E7%B2%92%E5%95%86%E5%9F%8E/"}]}